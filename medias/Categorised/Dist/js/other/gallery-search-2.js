function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(t){var e,r,n,a,s,c,i,u,o,l,p,f,m,y,g,d;t&&(e={collection:"stir-www",query:"!padre",num_ranks:"1000",meta_type_and:"gallery",sort:"dmetad",SF:"[tags|custom]",fmo:"true"},r=stir.map(function(t){return t+"="+encodeURIComponent(e[t])},Object.keys(e)).join("&"),n={funnelbackServer:"https://search.stir.ac.uk",resultsArea:t,searchForm:stir.node("#gallery-search__form"),searchInputs:stir.nodes("#gallery-search__form select"),postsPerPage:12,noOfPageLinks:9,jsonUrl:"https://search.stir.ac.uk/s/search.json?"+r},Object.freeze(n),a=function(t,e,r){var n,a,o;return r.error?y(e.resultsArea,stir.getMaintenanceMsg()):s(r)?(n=i(t),(n=stir.filter(n,r.response.resultPacket.results)).length?(o=("1"===(a=c(e,t,n.length)).page?y:g)(e.resultsArea),r=u(a),t=stir.filter(function(t,e){return e>=a.start&&e<=a.last}),stir.compose(o,r,t)(n)):o(m())):y(e.resultsArea,m())},s=function(t){return null!==t.response.resultPacket&&t.response.resultPacket.results.length},c=function(t,e,r){var e=stir.filter(function(t){return"page"===t.name},e),e=e.length?e[0].value:1,e=stir.isNumeric(e)?e:1,n=(e-1)*t.postsPerPage,a=e*t.postsPerPage-1;return _objectSpread(_objectSpread({},{page:e,start:n,end:a,total:r,last:r<a?r:a}),t)},i=stir.curry(function(t,e){var r;return!!e&&(t=stir.filter(function(t){return t.name&&"page"!==t.name},t),r={meta_dyear:new Date(e.date).getFullYear(),meta_tags:e.metaData.tags},e=stir.map(function(t){return String(r[t.name]).includes(t.value)},t),stir.all(function(t){return t},e))}),u=stir.curry(function(t,e){var r=o(t);return"\n        ".concat(p(t),"\n        ").concat(e.map(function(t){return r(t)}).join(""),"\n        ").concat(f(t))}),o=stir.curry(function(t,e){return'\n        <div class="cell small-12 medium-6 large-4 u-mb-2">\n          <a href="'.concat(t.funnelbackServer).concat(e.clickTrackingUrl,'">\n            <div>\n              <div class="c-photo-gallery__thumb">\n                <img src="').concat(l(e.metaData.custom),'" loading="lazy" alt="').concat(e.title.split("|")[0].trim(),'">\n              </div>\n            </div>\n            <div class="cell small-12 u-bg-grey u-p-2">\n              <p><strong>').concat(e.title.split("|")[0].trim(),'</strong></p>\n              <p class="text-sm u-black">').concat(stir.Date.galleryDate(new Date(e.date)),"</p>\n            </div>\n          </a>\n        </div>")}),l=function(t){return t&&(t=t.split("|").filter(function(t){return JSON.parse(t).hasOwnProperty("farm")})).length?(t=JSON.parse(t[0]),"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_z.jpg")):""},p=function(t){return'\n        <div class="cell u-mb-1 text-center">\n          <p>Showing '.concat(t.start+1," -\n            ").concat(parseInt(t.end)>=parseInt(t.total)?t.total:t.end+1," \n            of ").concat(t.total," results</p>\n        </div>")},f=function(t){var e=t.last,r=t.total,t=t.page;return r<=e?"":'<div class="cell text-center" id="pagination-box">\n            <button class="button hollow tiny" data-page="'.concat(Number(t)+1,'">Load more results</button>\n        </div>')},m=function(){return'<div class="cell"><p>No galleries found </p></div>'},y=stir.curry(function(t,e){return stir.setHTML(t,e),t}),g=stir.curry(function(t,e){return t.insertAdjacentHTML("beforeend",e),t}),d=QueryParams.getAll(),stir.each(function(t){return d[t.name]&&(t.value=d[t.name])},n.searchInputs),stir.getJSON(n.jsonUrl,function(e){a(QueryParams.getAllArray(),n,e),n.searchForm&&n.searchForm.addEventListener("submit",function(t){QueryParams.set("page",1),n.searchInputs.forEach(function(t){return QueryParams.set(t.name,t.value)}),a(QueryParams.getAllArray(),n,e),t.preventDefault()},!1),n.resultsArea.addEventListener("click",function(t){t.target.matches("#pagination-box button")&&(t.target.classList.add("hide"),QueryParams.set("page",t.target.getAttribute("data-page")),a(QueryParams.getAllArray(),n,e))})}))}(stir.node("#gallery-search__results"));