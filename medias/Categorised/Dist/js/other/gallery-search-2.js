function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}!function(t){var e,r,n,a,c,o,i,u,s,l,p,f,g,m,d,y;t&&(e={collection:"stir-www",query:"!padre",num_ranks:"1000",meta_type_and:"gallery",sort:"dmetad",SF:"[tags|custom]",fmo:"true"},r=stir.map(function(t){return t+"="+encodeURIComponent(e[t])},Object.keys(e)).join("&"),n={funnelbackServer:"https://search.stir.ac.uk",resultsArea:t,searchForm:stir.node("#gallery-search__form"),searchInputs:stir.nodes("#gallery-search__form select"),postsPerPage:12,noOfPageLinks:9,jsonUrl:"https://search.stir.ac.uk/s/search.json?"+r},Object.freeze(n),a=function(t,e,r){if(r.error)return m(e.resultsArea,stir.getMaintenanceMsg());if(!c(r))return m(e.resultsArea,g());var n=i(t),n=stir.filter(n,r.response.resultPacket.results);if(!n.length)return s(g());var a=o(e,t,n.length),s=("1"===a.page?m:d)(e.resultsArea),r=u(a),t=stir.filter(function(t,e){return e>=a.start&&e<=a.last});return stir.compose(s,r,t)(n)},c=function(t){return null!==t.response.resultPacket&&t.response.resultPacket.results.length},o=function(t,e,r){var e=stir.filter(function(t){return"page"===t.name},e),e=e.length?e[0].value:1,e=stir.isNumeric(e)?e:1,n=(e-1)*t.postsPerPage,a=e*t.postsPerPage-1;return _objectSpread(_objectSpread({},{page:e,start:n,end:a,total:r,last:r<a?r:a}),t)},i=stir.curry(function(t,e){if(!e)return!1;var t=stir.filter(function(t){return t.name&&"page"!==t.name},t),r={meta_dyear:new Date(e.date).getFullYear(),meta_tags:e.metaData.tags},e=stir.map(function(t){return String(r[t.name]).includes(t.value)},t);return stir.all(function(t){return t},e)}),u=stir.curry(function(t,e){var r=s(t);return"\n        ".concat(p(t),"\n        ").concat(e.map(function(t){return r(t)}).join(""),"\n        ").concat(f(t))}),s=stir.curry(function(t,e){return'\n        <div class="cell small-12 medium-6 large-4 u-mb-2">\n          <a href="'.concat(t.funnelbackServer).concat(e.clickTrackingUrl,'">\n            <div>\n              <div class="c-photo-gallery__thumb">\n                <img src="').concat(l(e.metaData.custom),'" loading="lazy" alt="').concat(e.title.split("|")[0].trim(),'">\n              </div>\n            </div>\n            <div class="cell small-12 u-bg-grey u-p-2">\n              <p><strong>').concat(e.title.split("|")[0].trim(),'</strong></p>\n              <p class="text-sm u-black">').concat(stir.Date.galleryDate(new Date(e.date)),"</p>\n            </div>\n          </a>\n        </div>")}),l=function(t){if(!t)return"";t=t.split("|").filter(function(t){return JSON.parse(t).hasOwnProperty("farm")});if(!t.length)return"";t=JSON.parse(t[0]);return"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_z.jpg")},p=function(t){return'\n        <div class="cell u-mb-1 text-center">\n          <p>Showing '.concat(t.start+1," -\n            ").concat(parseInt(t.end)>=parseInt(t.total)?t.total:t.end+1," \n            of ").concat(t.total," results</p>\n        </div>")},f=function(t){var e=t.last,r=t.total,t=t.page;return r<=e?"":'<div class="cell text-center" id="pagination-box">\n            <button class="button hollow tiny" data-page="'.concat(Number(t)+1,'">Load more results</button>\n        </div>')},g=function(){return'<div class="cell"><p>No galleries found </p></div>'},m=stir.curry(function(t,e){return stir.setHTML(t,e),t}),d=stir.curry(function(t,e){return t.insertAdjacentHTML("beforeend",e),t}),y=QueryParams.getAll(),stir.each(function(t){return y[t.name]&&(t.value=y[t.name])},n.searchInputs),stir.getJSON(n.jsonUrl,function(e){a(QueryParams.getAllArray(),n,e),n.searchForm&&n.searchForm.addEventListener("submit",function(t){QueryParams.set("page",1),n.searchInputs.forEach(function(t){return QueryParams.set(t.name,t.value)}),a(QueryParams.getAllArray(),n,e),t.preventDefault()},!1),n.resultsArea.addEventListener("click",function(t){t.target.matches("#pagination-box button")&&(t.target.classList.add("hide"),QueryParams.set("page",t.target.getAttribute("data-page")),a(QueryParams.getAllArray(),n,e))})}))}(stir.node("#gallery-search__results"));