function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){var t,r,n,a,c,i,o,l,s,u,p,f,g,m,d;e&&(t={collection:"stir-www",query:"!padre",num_ranks:"1000",meta_type_and:"gallery",sort:"dmetad",SF:"[tags|custom]",fmo:"true"},r=stir.map(function(e){return e+"="+encodeURIComponent(t[e])},Object.keys(t)).join("&"),n={funnelbackServer:"https://search.stir.ac.uk",resultsArea:e,searchForm:stir.node("#gallery-search__form"),searchInputs:stir.nodes("#gallery-search__form select"),postsPerPage:12,noOfPageLinks:9,jsonUrl:"https://search.stir.ac.uk/s/search.json?"+r},Object.freeze(n),a=function(e,t,r){var n=m(t.resultsArea);if(r.error)return n(stir.getMaintenanceMsg());if(!c(r))return n(g());if(c(r)){var a=o(e),a=stir.filter(a,r.response.resultPacket.results);if(!a.length)return n(g());var s=i(t,e,a.length),r=l(s),e=stir.filter(function(e,t){return t>=s.start&&t<=s.last});stir.compose(n,r,e)(a);return stir.scrollToElement(t.searchForm,-30),!0}},c=function(e){return null!==e.response.resultPacket&&e.response.resultPacket.results.length},i=function(e,t,r){var t=stir.filter(function(e){return"page"===e.name},t),t=t.length?t[0].value:1,t=stir.isNumeric(t)?t:1,n=(t-1)*e.postsPerPage,a=t*e.postsPerPage-1;return _objectSpread(_objectSpread({},{page:t,start:n,end:a,total:r,last:r<a?r:a}),e)},o=stir.curry(function(e,t){if(!t)return!1;var e=stir.filter(function(e){return e.name&&"page"!==e.name},e),r={meta_dyear:new Date(t.date).getFullYear(),meta_tags:t.metaData.tags},t=stir.map(function(e){return String(r[e.name]).includes(e.value)},e);return stir.all(function(e){return e},t)}),l=stir.curry(function(e,t){var r=s(e);return"\n        ".concat(p(e),"\n        ").concat(t.map(function(e){return r(e)}).join(""),"\n        ").concat(f(e))}),s=stir.curry(function(e,t){var r=t.title.split("|")[0].trim();return'\n        <div class="cell small-12 medium-6 large-4 u-mb-2">\n          <a href="'.concat(e.funnelbackServer).concat(t.clickTrackingUrl,'">\n            <div>\n              <div class="c-photo-gallery__thumb">\n                <img src="').concat(u(t.metaData.custom),'" loading="lazy" alt="').concat(r,'">\n              </div>\n            </div>\n            <div class="cell small-12 u-bg-grey u-p-2">\n              <p><strong>').concat(r,'</strong></p>\n              <p class="text-sm u-black">').concat(stir.Date.galleryDate(new Date(t.date)),"</p>\n            </div>\n          </a>\n        </div>")}),u=function(e){if(!e)return"";e=e.split("|").filter(function(e){return JSON.parse(e).hasOwnProperty("farm")});if(!e.length)return"";e=JSON.parse(e[0]);return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_z.jpg")},p=function(e){return'\n        <div class="cell u-mb-1">\n          <p>Showing '.concat(e.start+1," -\n            ").concat(parseInt(e.end)>=parseInt(e.total)?e.total:e.end+1," \n            of ").concat(e.total," results</p>\n        </div>")},f=function(e){return e.postsPerPage>=e.total?"":'\n        <div class="cell">\n            <div class="grid-x grid-padding-x u-mt-2" id="pagination"> \n              '.concat(StirSearchHelpers.formPaginationHTML(e.total,e.postsPerPage,e.page,e.noOfPageLinks),"\n            </div>\n        </div>")},g=function(){return'<div class="cell"><p>No galleries found </p></div>'},m=stir.curry(function(e,t){return e.innerHTML=t,e}),d=QueryParams.getAll(),stir.each(function(e){return d[e.name]&&(e.value=d[e.name])},n.searchInputs),m(n.resultsArea,'<div class="cell"><p>Loading galleries...</p></div>'),stir.getJSON(n.jsonUrl,function(r){a(QueryParams.getAllArray(),n,r),n.searchForm&&n.searchForm.addEventListener("submit",function(e){QueryParams.set("page",1),n.searchInputs.forEach(function(e){return QueryParams.set(e.name,e.value)}),a(QueryParams.getAllArray(),n,r),e.preventDefault()},!1),n.resultsArea.addEventListener("click",function(e){function t(e){QueryParams.set("page",e),a(QueryParams.getAllArray(),n,r)}if(e.target.matches("#pagination a"))return t(e.target.getAttribute("data-page")),void e.preventDefault();e.target.matches("#pagination span")&&(t(e.target.parentNode.getAttribute("data-page")),e.preventDefault())})}))}(stir.node("#gallery-search__results"));