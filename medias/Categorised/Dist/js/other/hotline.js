!function(){var n;function a(e){var t="open"==this.getAttribute("data-hotline"),n="closed"==this.getAttribute("data-hotline");e?(t&&this.removeAttribute("aria-hidden"),n&&this.setAttribute("aria-hidden",!0)):(n&&this.removeAttribute("aria-hidden"),t&&this.setAttribute("aria-hidden",!0))}function i(e,t){a.call(this,!!n&&n.clearingHotlineOpen(e,null!=t))}if((n="function"==typeof UoS_ClearingClock?new UoS_ClearingClock:n)||console.error("[Clearing hotline] clock unavailable"),Array.prototype.forEach.call(document.querySelectorAll("[data-hotline]"),function(e){i.call(e,null,e.getAttribute("data-early"))}),"www.stir.ac.uk"!=window.location.hostname){var t=document.querySelector("#demo select");if(t){var l=document.querySelector("#status"),o=document.getElementById("allow-early"),r=document.getElementById("date"),c=document.getElementById("time"),e=new Date;r.value=e.getFullYear()+"-"+("0"+(e.getUTCMonth()+1).toString()).slice(-2)+"-"+("0"+e.getUTCDate().toString()).slice(-2),c.value=("0"+e.getHours().toString()).slice(-2)+":"+("0"+e.getMinutes().toString()).slice(-2),t.addEventListener("change",d),r.addEventListener("change",d),c.addEventListener("change",d),o.addEventListener("change",d);try{l.querySelector('[data-value="current-time-utc"]').textContent=n.convert("UTC","en-GB"),l.querySelector('[data-value="current-time-local"]').textContent=(new Date).toLocaleString("en-GB"),l.querySelector('[data-value="current-time-stirling"]').textContent=n.convert("Europe/London","en-GB")}catch(e){console.error(e.stack||e.message),l.querySelector('[data-value="current-time-stirling"]').textContent=.5<Math.random()?"There is no spoon.":"The cake is a lie."}var u={is:function(e){document.querySelector('[data-value="hotline-open"]').textContent=e}};u.is(n.clearingHotlineOpen()?"Open":"Closed")}}function s(t,n,l){Array.prototype.forEach.call(document.querySelectorAll("[data-hotline]"),function(e){t?a.call(e,n):i.call(e,l,e.getAttribute("data-early"))})}function d(){var e=Number(t.value);-1===e?(s(null,null,null),l.classList.remove("timeshift"),u.is(n.clearingHotlineOpen(null,o.checked)?"Open":"Closed")):2===e?(s(null,null,new Date(r.value+"T"+c.value)),l.classList.add("timeshift"),u.is(n.clearingHotlineOpen(new Date(r.value+"T"+c.value),o.checked)?"Open":"Closed")):(s(!0,e,null),l.classList.add("timeshift"),u.is(e?"Open":"Closed"))}}();