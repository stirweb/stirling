!function(){var t=document.querySelector(".c-welcome-calendar");if(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=t.getAttribute("data-start")?new Date(t.getAttribute("data-start")):null,n=t.getAttribute("data-end")?new Date(t.getAttribute("data-end")):null,r=["first","second","third","fourth"],l=t.getAttribute("data-audience"),o=Array.prototype.slice.call(t.querySelectorAll(".h-event")),i=Array.prototype.slice.call(t.querySelectorAll("time")),d=document.createElement("select"),c=document.createElement("select"),u=[],s=new Date(Date.now());s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);if(o.forEach(e=>e.remove()),o.sort((e,t)=>e.getAttribute("data-date")<t.getAttribute("data-date")?-1:e.getAttribute("data-date")>t.getAttribute("data-date")?1:0).filter(e=>!a||new Date(e.getAttribute("data-date"))>a).filter(e=>!n||new Date(e.getAttribute("data-date"))<n).filter(e=>new Date(e.getAttribute("data-date"))>=s).forEach(e=>{u.push(e.getAttribute("data-date")),t.appendChild(e)}),u=u.filter(function(e,t,a){return a.indexOf(e)===t}),i.forEach(e=>e.innerText=e.innerText.replace(":00","")),1<u.length){(g=document.createElement("option")).value="",g.innerText="All dates",d.id="dateSelectElement",d.appendChild(g);for(var p=0;p<u.length;p++){var g=document.createElement("option"),b=new Date(u[p]);g.value=u[p],g.innerText=`${("0"+b.getUTCDate()).slice(-2)} ${e[b.getUTCMonth()]} `+b.getFullYear(),d.appendChild(g)}t.insertAdjacentElement("beforebegin",d),d.insertAdjacentHTML("beforebegin",'<label for="dateSelectElement">Filter events by date:</label>'),d.addEventListener("change",f)}if("pg"!=l&&1<r.length){(g=document.createElement("option")).value="",g.innerText="All year groups",c.id="groupSelectElement",c.appendChild(g);for(p=0;p<4;p++)(g=document.createElement("option")).innerText=r[p]+" year",g.value=p+1,c.appendChild(g);t.insertAdjacentElement("beforebegin",c),c.insertAdjacentHTML("beforebegin",'<label for="groupSelectElement">Filter events by year group:</label>'),c.addEventListener("change",f)}(1<r.length||1<u.length)&&((i=document.createElement("button")).type="reset",i.setAttribute("class","button"),i.textContent="Reset (show all events)",t.insertAdjacentElement("afterend",i),i.addEventListener("click",function(){m(),d.selectedIndex=c.selectedIndex=0,stir.scrollToElement(d,32)})),"pg"==l&&Array.prototype.forEach.call(t.querySelectorAll(".p-yeargroup"),function(e){e.parentNode.removeChild(e)})}function f(){var e;m(),e=d.options[d.selectedIndex],((e=(e&&e.value?`[data-date="${e.value}"]`:"")+((e=c.options[c.selectedIndex])&&e.value?`[data-group*="${e.value}"]`:""))?Array.prototype.slice.call(t.querySelectorAll(`.h-event:not(${e})`)):[]).forEach(function(e){e.classList&&e.classList.add("ejecta")})}function m(){o.forEach(function(e){e.classList&&e.classList.remove("ejecta")})}}();