!function(){var t=document.querySelector(".c-welcome-calendar");if(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=t.getAttribute("data-start")?new Date(t.getAttribute("data-start")):null,a=t.getAttribute("data-end")?new Date(t.getAttribute("data-end")):null,r=["first","second","third","fourth"],l=t.getAttribute("data-audience"),c=Array.prototype.slice.call(t.querySelectorAll(".h-event")),o=Array.prototype.slice.call(t.querySelectorAll("time")),i=document.createElement("select"),d=document.createElement("select"),u=[],s=new Date(Date.now());s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);if(c.forEach(function(e){return e.remove()}),c.sort(function(e,t){return e.getAttribute("data-date")<t.getAttribute("data-date")?-1:e.getAttribute("data-date")>t.getAttribute("data-date")?1:0}).filter(function(e){return!n||new Date(e.getAttribute("data-date"))>n}).filter(function(e){return!a||new Date(e.getAttribute("data-date"))<a}).filter(function(e){return new Date(e.getAttribute("data-date"))>=s}).forEach(function(e){u.push(e.getAttribute("data-date")),t.appendChild(e)}),u=u.filter(function(e,t,n){return n.indexOf(e)===t}),o.forEach(function(e){return e.innerText=e.innerText.replace(":00","")}),1<u.length){(p=document.createElement("option")).value="",p.innerText="All dates",i.id="dateSelectElement",i.appendChild(p);for(var f=0;f<u.length;f++){var p=document.createElement("option"),g=new Date(u[f]);p.value=u[f],p.innerText="".concat(("0"+g.getUTCDate()).slice(-2)," ").concat(e[g.getUTCMonth()]," ").concat(g.getFullYear()),i.appendChild(p)}t.insertAdjacentElement("beforebegin",i),i.insertAdjacentHTML("beforebegin",'<label for="dateSelectElement">Filter events by date:</label>'),i.addEventListener("change",b)}if("pg"!=l&&1<r.length){(p=document.createElement("option")).value="",p.innerText="All year groups",d.id="groupSelectElement",d.appendChild(p);for(f=0;f<4;f++)(p=document.createElement("option")).innerText=r[f]+" year",p.value=f+1,d.appendChild(p);t.insertAdjacentElement("beforebegin",d),d.insertAdjacentHTML("beforebegin",'<label for="groupSelectElement">Filter events by year group:</label>'),d.addEventListener("change",b)}(1<r.length||1<u.length)&&((o=document.createElement("button")).type="reset",o.setAttribute("class","button"),o.textContent="Reset (show all events)",t.insertAdjacentElement("afterend",o),o.addEventListener("click",function(){m(),i.selectedIndex=d.selectedIndex=0,stir.scrollToElement(i,32)})),"pg"==l&&Array.prototype.forEach.call(t.querySelectorAll(".p-yeargroup"),function(e){e.parentNode.removeChild(e)})}function b(){var e;m(),e=i.options[i.selectedIndex],((e=(e&&e.value?'[data-date="'.concat(e.value,'"]'):"")+((e=d.options[d.selectedIndex])&&e.value?'[data-group*="'.concat(e.value,'"]'):""))?Array.prototype.slice.call(t.querySelectorAll(".h-event:not(".concat(e,")"))):[]).forEach(function(e){e.classList&&e.classList.add("ejecta")})}function m(){c.forEach(function(e){e.classList&&e.classList.remove("ejecta")})}}();