var UoS_GettingAround=function(){for(var e="Residences",o="Sports",t="Buildings",n="Food and drink",a="NextBike",r="Car parking",i="Disabled parking",s="Short stay car parking",c="Electric bike hire",d="Electric car charging point",p="Drop off point",m="No vehicular access ",g=[{name:"Campus Central / Atrium",type:t,coords:"56.145922, -3.920283"},{name:"Students' Union",type:t,coords:"56.145926, -3.918393"},{name:"Queens Court drop off point",type:p,coords:"56.144959, -3.920038"},{name:"No vehicular access - pedestrians only",type:m,coords:"56.145610, -3.923317"},{name:"No vehicular access - pedestrians only",type:m,coords:"56.145245, -3.920502"},{name:"Parking",type:r,coords:"56.149712, -3.925524"},{name:"Disabled Parking",type:i,coords:"56.145336, -3.920214"},{name:"Disabled Parking",type:i,coords:"56.149366, -3.916759"},{name:"Disabled Parking",type:i,coords:"56.148727, -3.913141"},{name:"Disabled Parking",type:i,coords:"56.149104, -3.906754"},{name:"Disabled Parking",type:i,coords:"56.148378, -3.927181"},{name:"Disabled Parking",type:i,coords:"56.149931, -3.926829"},{name:"Disabled Parking",type:i,coords:"56.145243, -3.922320"},{name:"Disabled Parking",type:i,coords:"56.144765, -3.921848"},{name:"Disabled Parking",type:i,coords:"56.143794, -3.919998"},{name:"Disabled Parking",type:i,coords:"56.143627, -3.923367"},{name:"Parking",type:r,coords:"56.148595, -3.928518"},{name:"Parking",type:r,coords:"56.148320, -3.926168"},{name:"Parking",type:r,coords:"56.149372, -3.922807"},{name:"Parking",type:r,coords:"56.149416, -3.921820"},{name:"Parking",type:r,coords:"56.148940, -3.919535"},{name:"Parking",type:r,coords:"56.149215, -3.915994"},{name:"Parking",type:r,coords:"56.148767, -3.913752"},{name:"Parking",type:r,coords:"56.149469, -3.910930"},{name:"Parking",type:r,coords:"56.149603, -3.909943"},{name:"Parking",type:r,coords:"56.148790, -3.906778"},{name:"Disabled Parking",type:i,coords:"56.146569, -3.925578"},{name:"Parking",type:r,coords:"56.145128, -3.923044"},{name:"Parking",type:r,coords:"56.143813, -3.923044"},{name:"Parking",type:r,coords:"56.142424, -3.921624"},{name:"Parking",type:r,coords:"56.143172, -3.919779"},{name:"Parking",type:r,coords:"56.142968, -3.918878"},{name:"Parking",type:r,coords:"56.143435, -3.918148"},{name:"Parking",type:r,coords:"56.142472, -3.913620"},{name:"The Bite",type:n,coords:"56.144471, -3.920713"},{name:"Haldane's",type:n,coords:"56.145882, -3.918882"},{name:"Scran",type:n,coords:"56.146062, -3.920032"},{name:"SUP",type:n,coords:"56.145762, -3.920271"},{name:"Pathfoot Dining Room",type:n,coords:"56.149127, -3.925329"},{name:"Crush Hall Pod",type:n,coords:"56.149494, -3.926526"},{name:"Stirling Court Hotel",type:n,coords:"56.143324, -3.922643"},{name:"Food and Drink at Macrobert",type:n,coords:"56.145644, -3.920007"},{name:"Nourish",type:n,coords:"56.145701, -3.924482"},{name:"Refresh Bar and Bistro",type:n,coords:"56.149127, -3.92082"},{name:"Students’ Union",description:"Studio, Underground and Venue",type:n,coords:"56.146026, -3.918340"},{name:"UMAMI",type:n,coords:"56.144384, -3.921226"},{name:"Parking",type:s,coords:"56.143692, -3.919897"},{name:"Alangrange",type:e,coords:"56.150993, -3.929349"},{name:"Alexander Court",type:e,coords:"56.149023, -3.906662"},{name:"Andrew Stewart Hall",type:e,coords:"56.148859, -3.922686"},{name:"Beech Court",type:e,coords:"56.148575,-3.919705"},{name:"Fraser of Allander House",type:e,coords:"56.148525, -3.921504"},{name:"Friarscroft",type:e,coords:"56.140727,-3.9261935"},{name:"H H Donnelly House",type:e,coords:"56.149045, -3.921639"},{name:"John Forty's Court",type:e,coords:"56.129741, -3.934522"},{name:"Juniper Court Standard Flats",type:e,coords:"56.149070, -3.917518"},{name:"Lyon Crescent",type:e,coords:"56.149936, -3.947224"},{name:"Muirhead House",type:e,coords:"56.149126, -3.919097"},{name:"Pendreich Way",type:e,coords:"56.149918, -3.924077"},{name:"Polwarth House",type:e,coords:"56.148953, -3.920406"},{name:"Spittal Hill",type:e,coords:"56.141321, -3.92499"},{name:"Thistle Chambers",type:e,coords:"56.118522, -3.935718"},{name:"Union Street, Bridge of Allan",type:e,coords:"56.154105, -3.948818"},{name:"Union Street Development",type:e,coords:"56.126040, -3.940609"},{name:"Willow Court",type:e,coords:"56.149183, -3.921046"},{name:"Swimming pool",type:o,coords:"56.146876, -3.925188"},{name:"Sports Pavilion",type:o,coords:"56.149051,-3.910593"},{name:"Sports Facilities",type:o,coords:"56.145705, -3.924490"},{name:"National Tennis Centre",type:o,coords:"56.145541, -3.925086"},{name:"Airthrey Castle",type:t,coords:"56.148213,-3.913375"},{name:"Pathfoot Building",type:t,coords:"56.149210,-3.926748"},{name:"Colin Bell Building",type:t,coords:"56.143963, -3.917316"},{name:"Iris Murdoch Building",type:t,coords:"56.143974, -3.91697"},{name:"Macrobert Arts Centre",type:t,coords:"56.145636,-3.920355"},{name:"Airthrey Medical Centre",type:t,coords:"56.149604, -3.917463"},{name:"Innovation Park",type:t,coords:"56.142750, -3.917021"},{name:"Stirling Court Hotel",type:t,coords:"56.143324, -3.922643"},{name:"Scottish Institute of Sport",type:t,coords:"56.143065, -3.926171"},{name:"Cottrell Building",type:t,coords:"56.145389, -3.921220"},{name:"INTO Building",type:t,coords:"56.144384, -3.921226"},{name:"NextBike Willow Café",type:a,coords:"56.149110, -3.921319"},{name:"NextBike Alexander Court",type:a,coords:"56.148906, -3.906572"},{name:"NextBike Cottrell Building",type:a,coords:"56.144154, -3.922263"},{name:"Electric Car Charge Point",type:d,coords:"56.144836, -3.922242"},{name:"Electric Car Charge Point",type:d,coords:"56.149575, -3.925748"},{name:"Electric Bikes",type:c,coords:"56.144053, -3.920842"}],l=0;l<g.length;l++)switch(g[l].type){case n:g[l].icon='<t4 type="media" id="158271" formatter="path/*" />',g[l].usoIconClassName="uos-fork-knife";continue;case e:g[l].icon='<t4 type="media" id="158276" formatter="path/*" />',g[l].usoIconClassName="uos-home";continue;case t:g[l].icon='<t4 type="media" id="158266" formatter="path/*" />',g[l].usoIconClassName="uos-history-large";continue;case o:g[l].icon='<t4 type="media" id="158278" formatter="path/*" />',g[l].usoIconClassName="uos-runner";continue;case a:g[l].icon='<t4 type="media" id="158272" formatter="path/*" />';continue;case r:g[l].icon='<t4 type="media" id="158274" formatter="path/*" />',g[l].usoIconClassName="uos-car";continue;case i:g[l].icon='<t4 type="media" id="158267" formatter="path/*" />',g[l].usoIconClassName="uos-wheelchair";continue;case s:g[l].icon='<t4 type="media" id="158277" formatter="path/*" />',g[l].usoIconClassName="uos-car";continue;case d:g[l].icon='<t4 type="media" id="158270" formatter="path/*" />',g[l].usoIconClassName="uos-car";continue;case p:g[l].icon='<t4 type="media" id="158268" formatter="path/*" />',g[l].usoIconClassName="uos-car";continue;case m:g[l].icon='<t4 type="media" id="158273" formatter="path/*" />',g[l].usoIconClassName="uos-pedestrian";continue;case c:g[l].icon='<t4 type="media" id="158269" formatter="path/*" />',g[l].usoIconClassName="uos-bike";continue}var u,y,h={zoom:16,center:{lat:56.14643094488868,lng:-3.918399958166454},travelMode:"WALKING",checkCurrentLocationWithinBounds:!0},k=[e,o,t];function f(){return g.forEach(C)}var C=function(e){var o=groupselect.options[groupselect.selectedIndex].value;e.marker.setMap(e.type===o?u:null)};function v(e){return{lat:parseFloat(e.split(",")[0]),lng:parseFloat(e.split(",")[1])}}function P(e,t){var o=$("#getting-around-directions__origin").val(),n=$("#getting-around-directions__destination").val();o&&n&&o!==n&&(y.close(),e.route({origin:o,destination:n,travelMode:h.travelMode},function(e,o){"OK"===o?t.setDirections(e):window.alert("Directions request failed due to "+o)}))}return{initMap:function(){var o=new google.maps.DirectionsService,t=new google.maps.DirectionsRenderer,e=new google.maps.LatLngBounds;u=new google.maps.Map(document.getElementById("getting-around__map"),{zoom:h.zoom,center:h.center}),t.setMap(u),y=new google.maps.InfoWindow;for(var n=0;n<g.length;n++)markerOptions={position:v(g[n].coords),map:u,title:g[n].title},void 0!==g[n].icon&&(markerOptions.icon=g[n].icon),g[n].marker=new google.maps.Marker(markerOptions),google.maps.event.addListener(g[n].marker,"click",function(o,t){return function(){var e="";-1<k.indexOf(g[t].type)&&(e='<p><a href="#" class="c-link" onclick="UoS_GettingAround.setDirectionsFromLink(event)" data-name="'+g[t].coords.replace(/\s/gi,"")+'">Get directions</a></p>'),y.setContent("<p><strong>"+g[t].name+"</strong></p>"+(g[t].description?"<p>"+g[t].description+"</p>":"")+'<p><span class="'+g[t].usoIconClassName+'"></span> '+g[t].type+"</strong></p>"+e),y.open(u,o)}}(g[n].marker,n)),e.extend(g[n].marker.position);h.center&&h.zoom?(u.setCenter(new google.maps.LatLng(h.center.lat,h.center.lng)),u.setZoom(h.zoom)):u.fitBounds(e);for(var a,r,i={},s=[],n=0;n<g.length;n++)i[g[n].type]||(i[g[n].type]=[]),i[g[n].type].push(g[n]),s.push(g[n].name);var c,d=document.getElementById("getting-around-directions__origin");for(c in end=document.getElementById("getting-around-directions__destination"),groupselect=document.createElement("select"),a=document.getElementById("filters"),(r=document.createElement("label")).textContent="Mark locations on the map:",r.appendChild(groupselect),a.appendChild(r),i){-1<k.indexOf(c)&&(i[(optgroup=document.createElement("optgroup")).label=c].forEach(function(e){var o=document.createElement("option");o.value=e.coords.replace(/\s/gi,""),o.textContent=e.name,optgroup.appendChild(o)}),d.appendChild(optgroup),end.appendChild(optgroup.cloneNode(!0)));var p=document.createElement("option");p.textContent=c,groupselect.appendChild(p)}for(s.sort(),n=0;n<s.length;n++)$("#getting-around__suggestions").append('<option value="'+s[n]+'">');function m(){P(o,t)}$("#getting-around__suggestions-input").on("change",function(e){for(var o,t=0;t<g.length;t++)g[t].name===this.value&&(o=g[t]);var n=v(o.coords);o&&(u.setCenter(new google.maps.LatLng(n.lat,n.lng)),u.setZoom(17),y.setContent("<p><strong>"+o.name+"</strong></p>"+(o.description?"<p>"+o.description+"</p>":"")),y.open(u,o.marker)),$("#getting-around__suggestions-input").val("")}),$("input[name='travelmode'][value='"+h.travelMode.toLowerCase()+"']").attr("checked",!0),$("input[name='travelmode']").on("click",function(e){h.travelMode=this.value.toUpperCase(),P(o,t)}),document.getElementById("getting-around-directions__origin").addEventListener("change",m),document.getElementById("getting-around-directions__destination").addEventListener("change",m),a.addEventListener("change",f),$("#filter__all").on("change",function(){var e=document.getElementsByClassName("filter"),o=document.getElementById("filter__all").checked;if(1==o){for(var t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=!0);f()}else if(0==o){for(t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=!1);f()}});for(var l=document.getElementsByClassName("filter"),n=0;n<l.length;n++)"checkbox"===l[n].type&&"Buildings"===l[n].name&&(l[n].checked=!0);f()},setDirectionsFromLink:function(e){var o=e.target;return $("#getting-around-directions__destination").val(o.getAttribute("data-name")),$("#getting-around-directions__origin option").eq(0).prop("selected",!0),$("#getting-around-tabs__directions-label").trigger("click"),e.preventDefault(),!1},setGoogleMapsLink:function(){}}}();