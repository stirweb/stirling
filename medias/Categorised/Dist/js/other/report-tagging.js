!function(){const a="search.stir.ac.uk",n=`https://${a}/s/search.json?collection=stir-www&query=!padrenullquery&meta_d3year=2020`,s=document.querySelector('[data-action="datazone"]'),r=document.createElement("div"),l="undefined"!=typeof _t4globals172244?_t4globals172244:{},d=(r.id="results",l.Tags=l.Tags||{},s.appendChild(r),t=>` data-tag="${t.label}" data-count="${t.count}"`),e=t=>{var e=document.createElement("table"),a=document.createElement("tbody");a.insertAdjacentHTML("afterbegin",t.allValues.map(t=>{return`<tr><td>${e=t,`<a href="#${r.id}"${d(e)}>${l.Tags[e.label]||e.label}</a>`}</td$><td>${t.count}</td></tr>`;var e}).join("")),e.insertAdjacentHTML("afterbegin",`<thead><tr><th scope=column>${t.name}</th><th scope=column>Usage</th></tr></thead>`),e.appendChild(a),s.insertAdjacentElement("afterbegin",e),e.insertAdjacentHTML("beforebegin",`<small style="opacity:0.5">${n}</small>`),e.addEventListener("click",o)},c=t=>`
    <div class=x-tag-report-result>
        <h3 class="header-stripped u-header--margin-stripped"><small>${t.rank}</small> ${t.title.split("|")[0]}</h3>
        <time><span class="u-icon h5 uos-calendar"></span> ${t.metaData.d?stir.Date.newsDate(new Date(t.metaData.d)):""}</time>
        <p>${t.metaData.c?.split("|")[0]}</p>
        <p>${t?.listMetadata?.tag?.map(t=>`<span class=tag>${l.Tags[t]||t}</span>`)?.join("")}</p>
    </div>
    `,i=(t,e)=>{t=`https://${a}/s/search.json?collection=stir-www&meta_tag=${t}&meta_d3year=2020&num_ranks=${e||255}&SF=[c,d,tag]&sort=date`;fetch(t).then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>{return t=t.response.resultPacket.results,r.innerHTML=t.map(c).join(""),void stir.scrollToElement(r)})},o=t=>{t&&t.target.hasAttribute("data-tag")&&i(t.target.getAttribute("data-tag"),t.target.getAttribute("data-count"))};fetch(n).then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>e(t.response.facets[0]))}();