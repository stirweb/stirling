!function(){const a="search.stir.ac.uk",n=document.querySelector('[data-action="datazone"]'),s=document.createElement("div");s.id="results",n.appendChild(s);a;const r=t=>` data-tag="${t.label}" data-count="${t.count}"`,e=t=>{var e=document.createElement("table"),a=document.createElement("tbody");a.insertAdjacentHTML("afterbegin",t.allValues.map(t=>{return`<tr><td>${e=t,`<a href="#${s.id}"${r(e)}>${e.label}</a>`}</td$><td>${t.count}</td></tr>`;var e}).join("")),e.insertAdjacentHTML("afterbegin","<thead><tr><td scope=column>Tag</th><th scope=column>Usage</th></tr></thead>"),e.appendChild(a),n.insertAdjacentElement("afterbegin",e),e.addEventListener("click",l)},c=t=>`
    <div class=x-tag-report-result>
        <h3 class="header-stripped u-header--margin-stripped"><small>${t.rank}</small> ${t.title.split("|")[0]}</h3>
        <time><span class="u-icon h5 uos-calendar"></span> ${t.metaData.d?stir.Date.newsDate(new Date(t.metaData.d)):""}</time>
        <p>${t.metaData.c?.split("|")[0]}</p>
        <p>${t?.listMetadata?.tag?.map(t=>`<span class=tag>${t}</span>`)?.join("")}</p>
    </div>
    `,d=(t,e)=>{t=`https://${a}/s/search.json?collection=stir-www&meta_tag=${t}&num_ranks=${e||255}&SF=[c,d,tag]&sort=date`;fetch(t).then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>{return t=t.response.resultPacket.results,s.innerHTML=t.map(c).join(""),void stir.scrollToElement(s)})},l=t=>{t&&t.target.hasAttribute("data-tag")&&d(t.target.getAttribute("data-tag"),t.target.getAttribute("data-count"))};fetch("https://search.stir.ac.uk/s/search.json?collection=stir-www&query=!padrenullquery").then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>e(t.response.facets[0]))}();