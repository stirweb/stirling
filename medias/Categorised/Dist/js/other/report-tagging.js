!function(){const a="search.stir.ac.uk";a;const s=document.querySelector('[data-action="datazone"]'),n=document.createElement("div"),r="undefined"!=typeof _t4globals172244?_t4globals172244:{},l=(n.id="results",r.Tags=r.Tags||{},s.appendChild(n),t=>` data-tag="${t.label}" data-count="${t.count}"`),e=t=>{var e=document.createElement("table"),a=document.createElement("tbody");a.insertAdjacentHTML("afterbegin",t.allValues.map(t=>{return`<tr><td>${e=t,`<a href="#${n.id}"${l(e)}>${r.Tags[e.label]||e.label}</a>`}</td$><td>${t.count}</td></tr>`;var e}).join("")),e.insertAdjacentHTML("afterbegin","<thead><tr><td scope=column>Tag</th><th scope=column>Usage</th></tr></thead>"),e.appendChild(a),s.insertAdjacentElement("afterbegin",e),e.addEventListener("click",i)},d=t=>`
    <div class=x-tag-report-result>
        <h3 class="header-stripped u-header--margin-stripped"><small>${t.rank}</small> ${t.title.split("|")[0]}</h3>
        <time><span class="u-icon h5 uos-calendar"></span> ${t.metaData.d?stir.Date.newsDate(new Date(t.metaData.d)):""}</time>
        <p>${t.metaData.c?.split("|")[0]}</p>
        <p>${t?.listMetadata?.tag?.map(t=>`<span class=tag>${r.Tags[t]||t}</span>`)?.join("")}</p>
    </div>
    `,c=(t,e)=>{t=`https://${a}/s/search.json?collection=stir-www&meta_tag=${t}&meta_d3year=2020&num_ranks=${e||255}&SF=[c,d,tag]&sort=date`;fetch(t).then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>{return t=t.response.resultPacket.results,n.innerHTML=t.map(d).join(""),void stir.scrollToElement(n)})},i=t=>{t&&t.target.hasAttribute("data-tag")&&c(t.target.getAttribute("data-tag"),t.target.getAttribute("data-count"))};fetch("https://search.stir.ac.uk/s/search.json?collection=stir-www&query=!padrenullquery&meta_d3year=2020").then(t=>t.text()).then(t=>JSON.parse(t)).then(t=>e(t.response.facets[0]))}();