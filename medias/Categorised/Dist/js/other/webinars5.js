const renderDivider=()=>'<div class="cell"><hr /></div>',renderNoItemsMessage=e=>`<div class="cell">${e}</div>`,renderHeader=(e,r)=>e||r?`<div class="cell u-mt-2">
    ${e?`<h2>${e}</h2>`:""}
    ${r}
  </div>`:"",renderRadioTab=(e,r)=>`<div class="u-border-width-4 u-px-1 u-white-line-top u-bg-medium-grey u-mr-tiny u-box-size-border">
              <label for="${e}" class="u-cursor-pointer u-p-1 text-sm inline-block u-w-full u-whitespace-nowrap">
              <input type="radio" id="${e}" name="view" class="hide" value="${e.replace("view","")}" />${r}</label>
          </div>`,renderDateTime=e=>`<p class="text-sm u-m-0">
    <strong>${e.date}, ${e.time} ${e.timeend?"to "+e.timeend:""} (${e.zone})</strong>
  </p>`,renderItem=e=>{var r=e.ondemand&&!e.isupcoming?'<span class="u-bg-heritage-berry u-white u-px-tiny u-py-xtiny text-xxsm">Watch on-demand</span>':e.isupcoming?'<span class="u-bg-heritage-green u-white u-px-tiny u-py-xtiny text-xxsm">Live event</span>':"";return`
    <div class="cell small-12 large-4 medium-6 u-mb-3">
      <div class="u-border-width-4 ${e.ondemand&&!e.isupcoming?"u-heritage-berry-line-left":"u-heritage-line-left"} u-p-2 u-relative u-bg-white u-h-full">
        <div class="u-absolute u-top--16">${r}</div>
        <h3 class="u-header--secondary-font u-text-regular u-black header-stripped u-m-0 u-py-2">
          <a href="${e.link}" class="u-border-bottom-hover u-border-width-2">${e.title}</a>
        </h3>
        ${e.isupcoming?renderDateTime(e):""}
        <div class="text-sm">${e.description}</div>
        <p class="text-sm">Audience: ${e.studylevels} students. ${e.countries}</p>
      </div>
    </div>`},renderAllItems=stir.curry((e,r)=>r.length||e.noItems?`
    <div class="grid-x grid-padding-x">
      ${renderHeader(e.head,e.intro)}
      ${r.length?r.map(renderItem).join(""):renderNoItemsMessage(e.noItems)}
      ${e.divider&&"no"===e.divider?"":renderDivider()}
    </div>`:""),renderSummary=e=>`<p class="u-pb-2 text-sm">Results based on filters - <strong>${e} webinars</strong></p>`,renderPaginationSummary=(e,r,t)=>`<p class="u-pb-2 text-sm text-center"><strong>Displaying ${e+1} to ${r} of ${t} results</strong></p>`,renderLoadMoreButon=()=>'<div class="text-center"><button class="button hollow tiny u-bg-white" data-loadmore>Load more results</button></div>',renderNoData=e=>`<p class="text-center text-sm">${e}</p>`,getRegionString=(e,r)=>e.filter(e=>e.tag===r).map(e=>e.data).join(", "),matchTag=(e,r,t)=>e.includes(t)||r.trim().includes(t),matcher=stir.curry((e,r,t,a)=>{if(r.includes(a.trim())||a.trim().includes(r.trim()))return!0;if("faculties"===t&&matchTag(r,a,"All Faculties"))return!0;if("countries"===t){if(matchTag(r,a,"All nationalities"))return!0;var i;if(r.includes("All international"))return t=getRegionString(e.macros,"United Kingdom"),i=getRegionString(e.macros,"RUK"),!t.includes(a.trim())&&!i.includes(a.trim())&&a.trim();if(e.macros.filter(e=>e.data.includes(r)).map(e=>e.tag).includes(a))return!0;t=e.macros.filter(e=>e.tag===r);if(t.length&&t[0].data.includes(a))return!0}return!1}),filterer=stir.curry((r,t,a)=>{return Object.keys(t).filter(e=>r.safeList.includes(e)).every(e=>{return a[e]?a[e].split(", ").some(matcher(r,t[e],e)):""===t[e]})}),getISONow=()=>Number((new Date).toISOString().split(".")[0].replaceAll(/[-:T]/g,"")),isPast=e=>!e.isupcoming,isUpcoming=e=>e.isupcoming,isOnDemand=e=>e.ondemand,isUpcomingByDate=r=>e=>Number(e.datetime)>r,sortByDatetime=(e,r)=>parseInt(e.datetime)-parseInt(r.datetime),setDOMContent=stir.curry((e,r)=>(stir.setHTML(e,r),e)),appendDOMContent=stir.curry((e,r)=>(e.insertAdjacentHTML("beforeend",r),e)),cleanQueryParam=e=>"string"!=typeof e?"":e.replace(/[^a-zA-Z0-9-_]/g,""),SafeQueryParams={get:e=>cleanQueryParam(QueryParams.get(e)),set:(e,r)=>QueryParams.set(e,cleanQueryParam(r)),remove:QueryParams.remove};function main(e,i,r,n,s){const t=getISONow();var r=stir.compose(stir.filter(filterer(e,n.params)),stir.map(e=>({...e,isupcoming:isUpcomingByDate(t)(e)})),stir.filter(e=>e.title))(r),a=stir.compose(stir.sort(sortByDatetime),stir.filter(isUpcoming))(r),o=stir.compose(stir.sort((e,r)=>-sortByDatetime(e,r)),stir.filter(isOnDemand),stir.filter(isPast))(r),d=[...a,...o],r=e["itemsPerPage"];const l=r*(n.page-1),u=l+r;(a.length&&!stir.node("#viewlive")||"live"===n.params.view&&!stir.node("#viewlive"))&&appendDOMContent(e.radioTabs,renderRadioTab("viewlive","View live")),(o.length&&!stir.node("#viewondemand")||"ondemand"===n.params.view&&!stir.node("#viewondemand"))&&appendDOMContent(e.radioTabs,renderRadioTab("viewondemand","On demand"));var m=(e,r)=>{var t=0==l?renderSummary(e.length):renderPaginationSummary(l,u,e.length),a=e.length>u?renderLoadMoreButon():renderNoData("");return("new"===s?setDOMContent:appendDOMContent)(i)(t+renderAllItems(n)(e.slice(l,u))+a)};switch(n.params.view){case"live":return m(a);case"ondemand":return m(o);default:return d.slice(l,u).length?null:setDOMContent(i,"<p>No webinars found</p>")}}function doForm(e,r,t,a,i){i=new FormData(i),i=Object.fromEntries(i.entries()),Object.entries(i).forEach(([e,r])=>SafeQueryParams.set(e,r)),i={page:SafeQueryParams.get("page"),params:{series:"",countries:mapQueryParams(i.region),subjects:"",studylevels:mapQueryParams(i.studylevel),faculties:"",categories:mapQueryParams(i.category),view:i.view},divider:"no"};main(e,r,t,i,a),""===r.innerHTML&&setDOMContent(r,"<p>No webinars found</p>")}const handleFormChange=(e,r,t)=>()=>{SafeQueryParams.set("page","1"),doForm(e,r,t,"new",stir.node("#webinarfilters"))},handleRadioClick=(r,t,a)=>e=>{SafeQueryParams.set("view",e.target.value),SafeQueryParams.set("page","1"),doForm(r,t,a,"new",stir.node("#webinarfilters")),stir.nodes("#webinarfilters input").forEach(e=>e.closest("div").classList.remove("u-bg-grey","u-energy-line-top")),e.target.closest("div").classList.add("u-bg-grey","u-energy-line-top")},handlePagination=(t,a,i)=>e=>{var r;"BUTTON"===e.target.nodeName&&(r=Number(SafeQueryParams.get("page"))||1,SafeQueryParams.set("page",String(r+1)),doForm(t,a,i,"append",stir.node("#webinarfilters")),e.target.scrollIntoView({behavior:"smooth"}),e.target.classList.add("hide"))},mapQueryParams=e=>{e=e.replaceAll("-"," ");return"Postgraduate taught"===e?"Postgraduate (taught)":"Postgraduate research"===e?"Postgraduate (research)":e};function initWebinarForm(r,t){if(r.webinarResultsArea){const a=r.webinarResultsArea;if(a){SafeQueryParams.set("page","1");const i={category:SafeQueryParams.get("category")?SafeQueryParams.get("category"):"",studylevel:SafeQueryParams.get("studylevel")?SafeQueryParams.get("studylevel"):"",region:SafeQueryParams.get("region")?SafeQueryParams.get("region"):"",view:SafeQueryParams.get("view")?SafeQueryParams.get("view"):"live",page:1};var e={page:i.page,params:{series:"",countries:mapQueryParams(i.region),subjects:"",studylevels:mapQueryParams(i.studylevel),faculties:"",categories:mapQueryParams(i.category),view:i.view},divider:"no"};main(r,a,t,e,"new"),""===a.innerHTML&&setDOMContent(a,"<p>No webinars found</p>"),stir.nodes("#webinarfilters select").forEach(e=>{e.value=i[e.name],e.addEventListener("change",handleFormChange(r,a,t))}),r.radioTabs.addEventListener("click",e=>{"INPUT"===e.target.nodeName&&handleRadioClick(r,a,t)(e)}),stir.nodes("#webinarfilters input").forEach(e=>{e.value===i[e.name]&&(e.checked=!0,e.closest("div").classList.add("u-bg-grey","u-energy-line-top"))}),a.addEventListener("click",handlePagination(r,a,t))}}}function initWebinarSections(r,t,a){var e,i;r.webinarSections.length&&((e=r.webinarSections).forEach(e=>{main(r,e,t,a[e.dataset.webinarsects],"onload")}),i=stir.node("[data-webinardisclaimer]"))&&e.map(e=>e.innerText).join("").trim().length<1&&setDOMContent(i,stir.t4Globals.webinarsdisclaimer||"")}!function(){if(stir.nodes("[data-webinar]")){const r={webinarResultsArea:stir.node("#webinarresults"),radioTabs:stir.node("#radioTabs"),webinarSections:stir.nodes("[data-webinarSects]"),itemsPerPage:6,safeList:["countries","series","subjects","studylevels","faculties","categories"],macros:(stir.t4Globals.regionmacros||[]).filter(e=>e.tag)},t=stir.t4Globals.webinarSectionData||{};var e;e=function(e){switch(e){case"dev":return"index.json";case"preview":return'<t4 type="navigation" id="5271" />';default:return'<t4 type="navigation" id="5271" />index.json'}}(UoS_env.name),fetch(e).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{return t="id",e.reduce((e,r)=>{return e.find(e=>e[t]===r[t])?e:[...e,r]},[]);var t}).catch(e=>(console.error("There was a problem fetching the webinar data:",e),[])).then(e=>{e=e,initWebinarForm(r,e),initWebinarSections(r,e,t)})}}();