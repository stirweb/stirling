!function(){if(!stir.nodes("[data-webinar]"))return;const i=stir.t4Globals.webinars||[],t=stir.t4Globals.webinarSectionData||{};var e=stir.t4Globals.webinarsdisclaimer||"",r=stir.node("[data-webinardisclaimer]");const s={safeList:["countries","series","subjects","studylevels","faculties","categories"],macros:stir.filter(e=>{if(e.tag)return e},stir.t4Globals.regionmacros)||[]},c=(Object.freeze(s),stir.curry((i,s,a)=>{var e=stir.filter(e=>i.safeList.includes(e),Object.keys(s)),e=stir.map(e=>{var t,r;return a[e]?(t=a[e].split(", "),r=l(i,s[e],e),r=stir.map(r,t),stir.any(e=>!0===e,r)):""===s[e]},e);return stir.all(e=>!0===e,e)})),l=stir.curry((e,t,r,i)=>{if(t.includes(i.trim()))return!0;if(i.trim().includes(t.trim()))return!0;if(r&&"faculties"===r&&a(t,i,"All Faculties"))return!0;if(r&&"countries"===r){if(a(t,i,"All nationalities"))return!0;if(t.includes("All international")&&!n(e.macros,"United Kingdom").includes(i.trim())&&!n(e.macros,"RUK").includes(i.trim())&&i.trim())return!0;if(e.macros.filter(e=>!!e.data.includes(t)).map(e=>e.tag).includes(i))return!0;r=e.macros.filter(e=>e.tag===t);if(r.length&&r[0].data.includes(i))return!0}return!1}),a=(e,t,r)=>!!e.includes(r)||!!t.trim().includes(r),n=(e,t)=>e.filter(e=>e.tag===t).map(e=>e.data).join(", "),m=stir.curry(e=>{var t=(new Date).toISOString(),t=Number(t.split(".")[0].replaceAll(":","").replaceAll("-","").replaceAll("T",""));return Number(e.datetime)<t}),g=stir.curry(e=>{var t=(new Date).toISOString(),t=Number(t.split(".")[0].replaceAll(":","").replaceAll("-","").replaceAll("T",""));return Number(e.datetime)>t}),p=stir.curry(e=>"Yes"===e.ondemand),d=e=>{return`
          <div class="cell small-12 large-4 medium-6 u-mb-3 " >
              <div class="u-border-width-4  ${e.ondemand&&!g(e)?"u-heritage-berry-line-left":"u-heritage-line-left"} u-p-2 u-relative u-bg-white u-h-full ">
                    <div class="u-absolute u-top--16">
                        ${e.ondemand&&!g(e)?'<span class="u-bg-heritage-berry u-white  u-px-tiny u-py-xtiny text-xxsm">Watch on-demand</span>':""}
                        ${g(e)?'<span class="u-bg-heritage-green u-white u-px-tiny u-py-xtiny text-xxsm">Live event</span>':""}
                    </div>

                    <h3 class="-header--secondary-font u-text-regular u-black header-stripped u-m-0 u-py-2">
                      <a href="${e.link}" class="u-border-bottom-hover u-border-width-2" >${e.title}</a>
                    </h3>
                    ${g(e)?(t=e,`<p class="text-sm u-m-0"><strong>${t.date}, ${t.time} ${t.timeend?"to "+t.timeend:""} (${t.zone})</strong></p>`):""}
                   
                    <div class="text-sm">
                      ${e.description}
                    </div>
                    <p class="text-sm">Audience: ${e.studylevels} students. ${e.countries} </p>
              </div>
          </div> `;var t},v=e=>`<p class="u-pb-2 text-sm">Results based on filters - ${e} webinars</p>`,f=stir.curry((e,t)=>{var r,i;if(t.length||e.noItems)return`
            <div class="grid-x grid-padding-x" >
              ${r=e.head,i=e.intro,r||i?`
          <div class="cell u-mt-2">
            ${r?"<h2>"+r+"</h2>":""}
            ${i}
          </div>`:""}
              ${t.length?stir.map(d,t).join(""):'<div class="cell">'+e.noItems+"</div>"}
              ${e.divider&&"no"===e.divider?"":'<div class="cell"><hr /></div>'}
            </div>`}),y=stir.curry((e,t)=>(stir.setHTML(e,t),e));var u=e=>e.replaceAll("script>","").replaceAll("script%3E","").replaceAll("<","");const o=(e,t,r,i)=>{var s=stir.filter(e=>e.title),e=stir.filter(c(e,i.params)),a=stir.filter(g),l=stir.filter(m),n=stir.filter(p),d=stir.sort((e,t)=>parseInt(e.datetime)>parseInt(t.datetime)?1:parseInt(t.datetime)>parseInt(e.datetime)?-1:0),u=stir.sort((e,t)=>parseInt(e.datetime)<parseInt(t.datetime)?1:parseInt(t.datetime)<parseInt(e.datetime)?-1:0),t=y(t),o=f(i),d=stir.compose(d,e,a,s)(r),a=stir.compose(u,e,n,l,s)(r);return"ondemand"===i.params.view?t(v(a.length)+o(a)):"live"===i.params.view?t(v(d.length)+o(d)):t(v([...d,...a].length)+o([...d,...a]))},b=stir.node("#webinarresults");if(b){const h=()=>{var e,t=new FormData(stir.node("#webinarfilters")),r=Object.fromEntries(t.entries());for(e in r)QueryParams.set(e,r[e]);t={params:{series:"",countries:r.region,subjects:"",studylevels:r.studylevel,faculties:"",categories:r.category,view:r.view},divider:"no"};o(s,b,i,t),""===b.innerHTML&&y(b,"<p>No webinars found</p>")},w={category:QueryParams.get("category")?u(QueryParams.get("category")):"",studylevel:QueryParams.get("studylevel")?u(QueryParams.get("studylevel")):"",region:QueryParams.get("region")?u(QueryParams.get("region")):"",view:QueryParams.get("view")?u(QueryParams.get("view")):""};u={params:{series:"",countries:w.region,subjects:"",studylevels:w.studylevel,faculties:"",categories:w.category,view:w.view},divider:"no"};o(s,b,i,u),""===b.innerHTML&&y(b,"<p>No webinars found</p>"),stir.nodes("#webinarfilters select").forEach(e=>{e.value=w[e.name],e.addEventListener("change",e=>h())});stir.nodes("#webinarfilters input").forEach(e=>{let a=0;e.addEventListener("click",e=>{var t,r,i,s;e.target.value===QueryParams.get("view")&&0<a||(a++,h(),stir.nodes("#webinarfilters input").forEach(e=>e.closest("div").classList.remove("u-bg-grey","u-energy-line-top")),e.target.closest("div").classList.add("u-bg-grey","u-energy-line-top"),e=e.target,t=stir.node("#radioTabs"),r=window.getComputedStyle(t),r=Number(r.getPropertyValue("padding-left").replace("px","")),i=e.closest("div").offsetWidth+r,s=t.parentElement.getBoundingClientRect(),e=e.closest("div").getBoundingClientRect(),console.log(e.left,s.left,r),e.right>s.width&&t.scrollBy({left:i,behavior:"smooth"}),e.left<s.left&&t.scrollBy({left:-i,behavior:"smooth"}))}),e.value===w[e.name]&&(e.checked=!0),e.value===w[e.name]?e.closest("div").classList.add("u-bg-grey","u-energy-line-top"):e.closest("div").classList.remove("u-bg-grey","u-energy-line-top"),e.value===w[e.name]&&e.click()})}u=stir.nodes("[data-webinarSects]");u.forEach(e=>{o(s,e,i,t[e.dataset.webinarsects])}),r&&u.map(e=>e.innerText).join("").trim().length<1&&y(r,e)}();