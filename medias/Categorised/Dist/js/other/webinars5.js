!function(){if(!stir.nodes("[data-webinar]"))return;const l=stir.t4Globals.webinars||[],t=stir.t4Globals.webinarSectionData||{};var e=stir.t4Globals.webinarsdisclaimer||"",r=stir.node("[data-webinardisclaimer]");const o={itemsPerPage:6,safeList:["countries","series","subjects","studylevels","faculties","categories"],macros:stir.filter(e=>{if(e.tag)return e},stir.t4Globals.regionmacros)||[]},i=e=>{return`
         <div class="cell small-12 large-4 medium-6 u-mb-3 " >
             <div class="u-border-width-4  ${e.ondemand&&!e.isupcoming?"u-heritage-berry-line-left":"u-heritage-line-left"} u-p-2 u-relative u-bg-white u-h-full ">
                   <div class="u-absolute u-top--16">
                      ${e.ondemand&&!e.isupcoming?'<span class="u-bg-heritage-berry u-white  u-px-tiny u-py-xtiny text-xxsm">Watch on-demand</span>':""}
                      ${e.isupcoming?'<span class="u-bg-heritage-green u-white u-px-tiny u-py-xtiny text-xxsm">Live event</span>':""}
                   </div>

                   <h3 class="u-header--secondary-font u-text-regular u-black header-stripped u-m-0 u-py-2">
                     <a href="${e.link}" class="u-border-bottom-hover u-border-width-2" >${e.title}</a>
                   </h3>
                   ${e.isupcoming?(t=e,`<p class="text-sm u-m-0"><strong>${t.date}, ${t.time} ${t.timeend?"to "+t.timeend:""} (${t.zone})</strong></p>`):""}
                  
                   <div class="text-sm">
                     ${e.description}
                   </div>
                   <p class="text-sm">Audience: ${e.studylevels} students. ${e.countries} </p>
             </div>
         </div> `;var t},m=stir.curry((e,t)=>{var r,s;if(t.length||e.noItems)return`
           <div class="grid-x grid-padding-x" >
             ${r=e.head,s=e.intro,r||s?`
         <div class="cell u-mt-2">
           ${r?"<h2>"+r+"</h2>":""}
           ${s}
         </div>`:""}
             ${t.length?stir.map(i,t).join(""):'<div class="cell">'+e.noItems+"</div>"}
             ${e.divider&&"no"===e.divider?"":'<div class="cell"><hr /></div>'}
           </div>`}),g=e=>`<p class="u-pb-2 text-sm">Results based on filters - <strong>${e} webinars</strong></p>`,p=(e,t,r)=>`<p class="u-pb-2 text-sm text-center"><strong>Displaying ${e+1} to ${t} of ${r} results</strong></p>`,v=()=>'<div class="text-center"><button class="button hollow tiny u-bg-white" data-loadmore>Load more results</button></div>',y=e=>`<p class="text-center text-sm">${e}</p>`,b=stir.curry((s,i,a)=>{var e=stir.filter(e=>s.safeList.includes(e),Object.keys(i)),e=stir.map(e=>{var t,r;return a[e]?(t=a[e].split(", "),r=n(s,i[e],e),r=stir.map(r,t),stir.any(e=>!0===e,r)):""===i[e]},e);return stir.all(e=>!0===e,e)}),n=stir.curry((e,t,r,s)=>{if(t.includes(s.trim()))return!0;if(s.trim().includes(t.trim()))return!0;if(r&&"faculties"===r&&a(t,s,"All Faculties"))return!0;if(r&&"countries"===r){if(a(t,s,"All nationalities"))return!0;if(t.includes("All international")&&!d(e.macros,"United Kingdom").includes(s.trim())&&!d(e.macros,"RUK").includes(s.trim())&&s.trim())return!0;if(e.macros.filter(e=>!!e.data.includes(t)).map(e=>e.tag).includes(s))return!0;r=e.macros.filter(e=>e.tag===t);if(r.length&&r[0].data.includes(s))return!0}return!1}),a=(e,t,r)=>!!e.includes(r)||!!t.trim().includes(r),d=(e,t)=>e.filter(e=>e.tag===t).map(e=>e.data).join(", "),f=stir.curry(e=>!e.isupcoming),h=stir.curry((e,t)=>Number(t.datetime)>e),w=stir.curry(e=>e.isupcoming),x=stir.curry(e=>e.ondemand),$=stir.curry((e,t)=>(stir.setHTML(e,t),e)),P=stir.curry((e,t)=>(e.insertAdjacentHTML("beforeend",t),e));var s=e=>e.replaceAll("script>","").replaceAll("script%3E","").replaceAll("<","");const c=(e,t,r,s,i)=>{n=(new Date).toISOString();const a=Number(n.split(".")[0].replaceAll(":","").replaceAll("-","").replaceAll("T",""));var n=r.filter(e=>e.title).map(e=>({...e,isupcoming:h(a,e)})),r=stir.filter(b(e,s.params)),l=stir.filter(w),o=stir.filter(f),d=stir.filter(x),c=stir.sort((e,t)=>parseInt(e.datetime)>parseInt(t.datetime)?1:parseInt(t.datetime)>parseInt(e.datetime)?-1:0),u=stir.sort((e,t)=>parseInt(e.datetime)<parseInt(t.datetime)?1:parseInt(t.datetime)<parseInt(e.datetime)?-1:0),i=("new"===i?$:P)(t),t=m(s),c=stir.compose(c,r,l)(n),l=stir.compose(u,r,d,o)(n),u=[...c,...l],r=s.page,d=e.itemsPerPage*(r-1),o=d+e.itemsPerPage;return"live"===s.params.view?(n=c.length>o?v():y("No more items to load"),i((0==d?g(c.length):p(d,o,c.length))+t(c.slice(d,o))+n)):"ondemand"===s.params.view?(r=l.length>o?v():y("No more items to load"),i((0==d?g(l.length):p(d,o,l.length))+t(l.slice(d,o))+r)):u.slice(d,o).length?(e=o<u.length?v():y("No more items to load"),i((0==d?g(u.length):p(d,o,u.length))+t(u.slice(d,o))+e)):void 0},u=(e,t,r,s,i)=>{var a,i=new FormData(i),n=Object.fromEntries(i.entries());for(a in n)QueryParams.set(a,n[a]);i={page:QueryParams.get("page"),params:{series:"",countries:n.region,subjects:"",studylevels:n.studylevel,faculties:"",categories:n.category,view:n.view},divider:"no"};c(e,t,r,i,s),""===t.innerHTML&&$(t,"<p>No webinars found</p>")},L=stir.node("#webinarresults");if(L){QueryParams.set("page",1);const Q={category:QueryParams.get("category")?s(QueryParams.get("category")):"",studylevel:QueryParams.get("studylevel")?s(QueryParams.get("studylevel")):"",region:QueryParams.get("region")?s(QueryParams.get("region")):"",view:QueryParams.get("view")?s(QueryParams.get("view")):"",page:1};s={page:Q.page,params:{series:"",countries:Q.region,subjects:"",studylevels:Q.studylevel,faculties:"",categories:Q.category,view:Q.view},divider:"no"};c(o,L,l,s,"new"),""===L.innerHTML&&$(L,"<p>No webinars found</p>"),stir.nodes("#webinarfilters select").forEach(e=>{e.value=Q[e.name],e.addEventListener("change",e=>u(o,L,l,"new",stir.node("#webinarfilters")))}),stir.nodes("#webinarfilters input").forEach(e=>{let n=0;e.addEventListener("click",e=>{QueryParams.set("page",1);var s,i,t,r,a=0===n?"onload":"click";e.target.value===QueryParams.get("view")&&0<n||(n++,u(o,L,l,"new",stir.node("#webinarfilters")),stir.nodes("#webinarfilters input").forEach(e=>e.closest("div").classList.remove("u-bg-grey","u-energy-line-top")),e.target.closest("div").classList.add("u-bg-grey","u-energy-line-top"),s=e.target,i=stir.node("#radioTabs"),e=a,a=s.closest("div").offsetWidth,t=i.parentElement.getBoundingClientRect(),(r=s.closest("div").getBoundingClientRect()).right>t.width&&(i.scrollBy({left:a,behavior:"smooth"}),"onload"===e)&&setTimeout(()=>{var e=s.closest("div").getBoundingClientRect().right,t=i.parentElement.getBoundingClientRect().right,r=window.screen.width-t;e<t&&i.scrollBy({left:e-t+2*r,behavior:"smooth"})},500),r.left<t.left&&i.scrollBy({left:-a,behavior:"smooth"}))}),e.value===Q[e.name]&&(e.checked=!0),e.value===Q[e.name]?e.closest("div").classList.add("u-bg-grey","u-energy-line-top"):e.closest("div").classList.remove("u-bg-grey","u-energy-line-top"),e.value===Q[e.name]&&e.click()}),L.addEventListener("click",e=>{var t;"BUTTON"===e.target.nodeName&&(t=Number(QueryParams.get("page"))||1,QueryParams.set("page",t+1),u(o,L,l,"append",stir.node("#webinarfilters")),e.target.scrollIntoView({behavior:"smooth"}),e.target.classList.add("hide"))})}s=stir.nodes("[data-webinarSects]");s.forEach(e=>{c(o,e,l,t[e.dataset.webinarsects],"onload")}),r&&s.map(e=>e.innerText).join("").trim().length<1&&$(r,e)}();