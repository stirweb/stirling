!function(){if(!stir.nodes("[data-webinar]"))return;const l=stir.t4Globals.webinars||[],t=stir.t4Globals.webinarSectionData||{};var e=stir.t4Globals.webinarsdisclaimer||"",r=stir.node("[data-webinardisclaimer]");const o={itemsPerPage:6,safeList:["countries","series","subjects","studylevels","faculties","categories"],macros:stir.filter(e=>{if(e.tag)return e},stir.t4Globals.regionmacros)||[]},s=e=>{return`
         <div class="cell small-12 large-4 medium-6 u-mb-3 " >
             <div class="u-border-width-4  ${e.ondemand&&!e.isupcoming?"u-heritage-berry-line-left":"u-heritage-line-left"} u-p-2 u-relative u-bg-white u-h-full ">
                   <div class="u-absolute u-top--16">
                      ${e.ondemand&&!e.isupcoming?'<span class="u-bg-heritage-berry u-white  u-px-tiny u-py-xtiny text-xxsm">Watch on-demand</span>':""}
                      ${e.isupcoming?'<span class="u-bg-heritage-green u-white u-px-tiny u-py-xtiny text-xxsm">Live event</span>':""}
                   </div>

                   <h3 class="u-header--secondary-font u-text-regular u-black header-stripped u-m-0 u-py-2">
                     <a href="${e.link}" class="u-border-bottom-hover u-border-width-2" >${e.title}</a>
                   </h3>
                   ${e.isupcoming?(t=e,`<p class="text-sm u-m-0"><strong>${t.date}, ${t.time} ${t.timeend?"to "+t.timeend:""} (${t.zone})</strong></p>`):""}
                  
                   <div class="text-sm">
                     ${e.description}
                   </div>
                   <p class="text-sm">Audience: ${e.studylevels} students. ${e.countries} </p>
             </div>
         </div> `;var t},m=stir.curry((e,t)=>{var r,i;if(t.length||e.noItems)return`
           <div class="grid-x grid-padding-x" >
             ${r=e.head,i=e.intro,r||i?`
         <div class="cell u-mt-2">
           ${r?"<h2>"+r+"</h2>":""}
           ${i}
         </div>`:""}
             ${t.length?stir.map(s,t).join(""):'<div class="cell">'+e.noItems+"</div>"}
             ${e.divider&&"no"===e.divider?"":'<div class="cell"><hr /></div>'}
           </div>`}),g=e=>`<p class="u-pb-2 text-sm">Results based on filters - ${e} webinars</p>`,p=()=>'<div class="text-center"><button class="button hollow tiny u-bg-white" data-loadmore>Load more results</button></div>',v=e=>`<p class="text-center text-sm">${e}</p>`,y=stir.curry((i,s,a)=>{var e=stir.filter(e=>i.safeList.includes(e),Object.keys(s)),e=stir.map(e=>{var t,r;return a[e]?(t=a[e].split(", "),r=n(i,s[e],e),r=stir.map(r,t),stir.any(e=>!0===e,r)):""===s[e]},e);return stir.all(e=>!0===e,e)}),n=stir.curry((e,t,r,i)=>{if(t.includes(i.trim()))return!0;if(i.trim().includes(t.trim()))return!0;if(r&&"faculties"===r&&a(t,i,"All Faculties"))return!0;if(r&&"countries"===r){if(a(t,i,"All nationalities"))return!0;if(t.includes("All international")&&!d(e.macros,"United Kingdom").includes(i.trim())&&!d(e.macros,"RUK").includes(i.trim())&&i.trim())return!0;if(e.macros.filter(e=>!!e.data.includes(t)).map(e=>e.tag).includes(i))return!0;r=e.macros.filter(e=>e.tag===t);if(r.length&&r[0].data.includes(i))return!0}return!1}),a=(e,t,r)=>!!e.includes(r)||!!t.trim().includes(r),d=(e,t)=>e.filter(e=>e.tag===t).map(e=>e.data).join(", "),b=stir.curry(e=>!e.isupcoming),f=stir.curry((e,t)=>Number(t.datetime)>e),h=stir.curry(e=>e.isupcoming),w=stir.curry(e=>e.ondemand),x=stir.curry((e,t)=>(stir.setHTML(e,t),e)),P=stir.curry((e,t)=>(e.insertAdjacentHTML("beforeend",t),e));var i=e=>e.replaceAll("script>","").replaceAll("script%3E","").replaceAll("<","");const c=(e,t,r,i,s)=>{n=(new Date).toISOString();const a=Number(n.split(".")[0].replaceAll(":","").replaceAll("-","").replaceAll("T",""));var n=r.filter(e=>e.title).map(e=>({...e,isupcoming:f(a,e)})),r=stir.filter(y(e,i.params)),l=stir.filter(h),o=stir.filter(b),d=stir.filter(w),c=stir.sort((e,t)=>parseInt(e.datetime)>parseInt(t.datetime)?1:parseInt(t.datetime)>parseInt(e.datetime)?-1:0),u=stir.sort((e,t)=>parseInt(e.datetime)<parseInt(t.datetime)?1:parseInt(t.datetime)<parseInt(e.datetime)?-1:0),s=("new"===s?x:P)(t),t=m(i),c=stir.compose(c,r,l)(n),l=stir.compose(u,r,d,o)(n),u=[...c,...l],r=i.page,d=e.itemsPerPage*(r-1),o=d+e.itemsPerPage;return"live"===i.params.view?(n=c.length>o?p():v("No more items to load"),s(g(c.length)+t(c.slice(d,o))+n)):"ondemand"===i.params.view?(r=l.length>o?p():v("No more items to load"),s(g(l.length)+t(l.slice(d,o))+r)):u.slice(d,o).length?(e=o<u.length?p():v("No more items to load"),s(g(u.length)+t(u.slice(d,o))+e)):void 0},u=(e,t,r,i,s)=>{var a,s=new FormData(s),n=Object.fromEntries(s.entries());for(a in n)QueryParams.set(a,n[a]);s={page:QueryParams.get("page"),params:{series:"",countries:n.region,subjects:"",studylevels:n.studylevel,faculties:"",categories:n.category,view:n.view},divider:"no"};c(e,t,r,s,i),""===t.innerHTML&&x(t,"<p>No webinars found</p>")},$=stir.node("#webinarresults");if($){QueryParams.set("page",1);const L={category:QueryParams.get("category")?i(QueryParams.get("category")):"",studylevel:QueryParams.get("studylevel")?i(QueryParams.get("studylevel")):"",region:QueryParams.get("region")?i(QueryParams.get("region")):"",view:QueryParams.get("view")?i(QueryParams.get("view")):"",page:1};i={page:L.page,params:{series:"",countries:L.region,subjects:"",studylevels:L.studylevel,faculties:"",categories:L.category,view:L.view},divider:"no"};c(o,$,l,i,"new"),""===$.innerHTML&&x($,"<p>No webinars found</p>"),stir.nodes("#webinarfilters select").forEach(e=>{e.value=L[e.name],e.addEventListener("change",e=>u(o,$,l,"new",stir.node("#webinarfilters")))}),stir.nodes("#webinarfilters input").forEach(e=>{let n=0;e.addEventListener("click",e=>{QueryParams.set("page",1);var i,s,t,r,a=0===n?"onload":"click";e.target.value===QueryParams.get("view")&&0<n||(n++,u(o,$,l,"new",stir.node("#webinarfilters")),stir.nodes("#webinarfilters input").forEach(e=>e.closest("div").classList.remove("u-bg-grey","u-energy-line-top")),e.target.closest("div").classList.add("u-bg-grey","u-energy-line-top"),i=e.target,s=stir.node("#radioTabs"),e=a,a=i.closest("div").offsetWidth,t=s.parentElement.getBoundingClientRect(),(r=i.closest("div").getBoundingClientRect()).right>t.width&&(s.scrollBy({left:a,behavior:"smooth"}),"onload"===e)&&setTimeout(()=>{var e=i.closest("div").getBoundingClientRect().right,t=s.parentElement.getBoundingClientRect().right,r=window.screen.width-t;e<t&&s.scrollBy({left:e-t+2*r,behavior:"smooth"})},500),r.left<t.left&&s.scrollBy({left:-a,behavior:"smooth"}))}),e.value===L[e.name]&&(e.checked=!0),e.value===L[e.name]?e.closest("div").classList.add("u-bg-grey","u-energy-line-top"):e.closest("div").classList.remove("u-bg-grey","u-energy-line-top"),e.value===L[e.name]&&e.click()}),$.addEventListener("click",e=>{var t;"BUTTON"===e.target.nodeName&&(t=Number(QueryParams.get("page"))||1,QueryParams.set("page",t+1),u(o,$,l,"append",stir.node("#webinarfilters")),e.target.scrollIntoView({behavior:"smooth"}),e.target.classList.add("hide"))})}i=stir.nodes("[data-webinarSects]");i.forEach(e=>{c(o,e,l,t[e.dataset.webinarsects],"onload")}),r&&i.map(e=>e.innerText).join("").trim().length<1&&x(r,e)}();