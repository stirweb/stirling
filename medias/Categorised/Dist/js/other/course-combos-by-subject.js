!function(t){if(!t)return;const r=t,l={"UDX16-PSY":"BSc (Hons) Psychology","UDX12-PSY":"BA (Hons) Psychology"};var t=stir.curry((r,t)=>stir.map(t=>({...t,combinations:i(r,t)}),t)),e=stir.curry((t,r)=>stir.filter(courseMatchesSubject(r),t));const i=(t,r)=>t.filter(t=>t.courses&&t.courses.filter(t=>t.url===r.url).length),o=t=>`	<div data-behaviour=accordion>
		<h3>${[t.prefix,t.title].join(" ").trim()}</h3>
		<div> <p>Apply now for:</p>
			<ul>
				${s(t)}
				${a(t.combinations)}
			</ul>
			</div>
		</div>
`,n=stir.curry((t,r,e)=>r?`<a href="${t+r}">${e}</a>`:e)("https://portal.stir.ac.uk/student/course-application/ugd/application.jsp?crsCode="),s=i=>i.applyCode&&i.applyCode.split(", ").map((t,r,e)=>t?`<li>${n(t.trim(),l[t.trim()]||[i.prefix,i.title].join(" ").trim())} <small>${1<e.length?" ("+t+")":""}</small></li>`:`<!-- ${i.title} -->`).join("\n"),a=t=>t?t.map(t=>`<li>${n(t.codes.apply,[t.prefix,t.title].join(" ").trim())}</li>`).join("\n"):null;var c=stir.t4globals.courses||[],p=stir.t4globals.combos||[];if(c.length&&p.length){var u,d=stir.reduce((t,r)=>t.includes(r)?t:[...t,r],[]),m=stir.map(t=>t.subject&&t.subject.split(/,\s+/g)),h=stir.filter(t=>t),h=stir.compose(stir.sort(null),h,d,t=>[].concat.apply([],t),m,stir.clone)(c),d=stir.filter(t=>!!t.applyCode,c);const f=t(stir.filter(t=>t.title,p)),y=e(d);r.innerHTML=stir.map(t=>{return r=t,(t=f(y(t))).length?`<h2 class="u-margin-top">${r}</h2> `+t.map(o).join(""):null;var r},h).join(""),m=Array.prototype.slice.call(r.querySelectorAll("h2")),u=document.createElement("nav"),r.insertAdjacentElement("afterbegin",u),m.forEach(t=>{var r=document.createElement("a");u.appendChild(r),r.innerText=t.innerText,r.href="#"+(t.id=t.innerText.replace(/[^a-zA-Z]/g,"-").toLowerCase())}),Array.prototype.forEach.call(r.querySelectorAll('[data-behaviour="accordion"]'),function(t){new stir.accord(t,!1)})}}(stir.node(".courselisting"));