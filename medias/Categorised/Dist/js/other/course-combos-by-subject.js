!function(t){if(!t)return;const r=t,l={"UDX16-PSY":"BSc (Hons) Psychology","UDX12-PSY":"BA (Hons) Psychology"};t=stir.curry((r,t)=>stir.map(t=>({...t,combinations:o(r,t)}),t));const i=stir.curry((t,r)=>-1!==r.subject.indexOf(t));var e=stir.curry((t,r)=>stir.filter(i(r),t));const o=(t,r)=>t.filter(t=>t.courses&&t.courses.filter(t=>t.url===r.url).length),n=t=>`	<div data-behaviour=accordion>
		<h3>${[t.prefix,t.title].join(" ").trim()}</h3>
		<div> <p>Apply now for:</p>
			<ul>
				${a(t)}
				${c(t.combinations)}
			</ul>
			</div>
		</div>
`,s=stir.curry((t,r,i)=>r?`<a href="${t+r}">${i}</a>`:i)("https://portal.stir.ac.uk/student/course-application/ugd/application.jsp?crsCode="),a=e=>e.applyCode&&e.applyCode.split(", ").map((t,r,i)=>t?`<li>${s(t.trim(),l[t.trim()]||[e.prefix,e.title].join(" ").trim())} <small>${1<i.length?" ("+t+")":""}</small></li>`:`<!-- ${e.title} -->`).join("\n"),c=t=>t?t.map(t=>`<li>${s(t.codes.apply,[t.prefix,t.title].join(" ").trim())}</li>`).join("\n"):null;var p=stir.t4globals.courses||[],u=stir.t4globals.combos||[];if(p.length&&u.length){var d,m=stir.reduce((t,r)=>t.includes(r)?t:[...t,r],[]),f=stir.map(t=>t.subject&&t.subject.split(/,\s+/g)),h=stir.filter(t=>t),h=stir.compose(stir.sort(null),h,m,t=>[].concat.apply([],t),f,stir.clone)(p),m=stir.filter(t=>!!t.applyCode,p);const y=t(stir.filter(t=>t.title,u)),g=e(m);r.innerHTML=stir.map(t=>{return r=t,(t=y(g(t))).length?`<h2 class="u-margin-top">${r}</h2> `+t.map(n).join(""):null;var r},h).join(""),f=Array.prototype.slice.call(r.querySelectorAll("h2")),d=document.createElement("nav"),r.insertAdjacentElement("afterbegin",d),f.forEach(t=>{var r=document.createElement("a");d.appendChild(r),r.innerText=t.innerText,r.href="#"+(t.id=t.innerText.replace(/[^a-zA-Z]/g,"-").toLowerCase())}),Array.prototype.forEach.call(r.querySelectorAll('[data-behaviour="accordion"]'),function(t){new stir.accord(t,!1)})}}(stir.node(".courselisting"));