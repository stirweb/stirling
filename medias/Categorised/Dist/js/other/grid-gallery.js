!function(){var d,t,l,c,s,h=[];if((d=document.querySelector("[data-gallery]"))&&(t=document.getElementById("template-pswp"))){var e=t=>t&&document.querySelector(t),i=t=>t&&t.innerText,r=t=>t&&t.split("|").shift().trim();const u=r(i(e("title")))||r(i(e("h1")));(r=document.createElement("div")).insertAdjacentHTML("afterbegin",t.innerHTML),document.body.appendChild(r.firstChild),(l="gallery"+d.getAttribute("data-gallery"))&&window[l]&&(i=stir.Number.clamp(parseInt(d.getAttribute("data-max"))||window[l].length,1,window[l].length),d.style.setProperty("--num-rows",Math.ceil(i/3)),window[l].slice(0,i).forEach(t=>{var e,i,r,a=document.createElement("li"),n=(o=t.o_width,e=t.o_height,{factor:i=(i=1024)<(n=e<o?o:e)?i/n:1,width:Math.round(o*i),height:Math.round(e*i)}),o=new Image(n.w,n.h);n.width<n.height&&a.classList.add("portrait"),s="https://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.id+"_"+t.secret,o.setAttribute("data-bgimage",s+"_c.jpg"),o.setAttribute("width",n.width),o.setAttribute("height",n.height),o.setAttribute("alt",t.title||u||`Image ${c} of `+window[l].length),o.setAttribute("data-gallery-index",c),a.appendChild(o),h.push({src:s+"_c.jpg",w:n.width,h:n.height,title:t.title}),r=stir.createIntersectionObserver({element:a,threshold:[.9],callback:function(t){(-1==t.intersectionRatio||0<t.intersectionRatio)&&((t=this.querySelector("[data-bgimage]")).src=t.getAttribute("data-bgimage"),t.removeAttribute("data-bgimage"),r)&&r.observer.unobserve(this)}}),d.insertAdjacentElement("beforeend",a)}),"undefined"!=typeof PhotoSwipe?(d.addEventListener("click",function(t){t.preventDefault(),new PhotoSwipe(document.querySelectorAll(".pswp")[0],PhotoSwipeUI_Default,Array.prototype.slice.call(h),{index:parseInt(t.target.getAttribute("data-gallery-index"))}).init()},!0),d.addEventListener("load",function(t){t.target.parentNode.setAttribute("data-loaded",!0)},!0)):console.error("PhotoSwipe not available!"))}}();