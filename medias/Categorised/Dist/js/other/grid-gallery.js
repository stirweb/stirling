!function(){var t,e,i,r,a=[];if((t=document.querySelector("[data-gallery]"))&&(e=document.getElementById("template-pswp"))){var n,o,d=t=>t&&document.querySelector(t),l=t=>t&&t.innerText,c=t=>t&&t.split("|").shift().trim(),h=c(l(d("title")))||c(l(d("h1")));if((c=document.createElement("div")).insertAdjacentHTML("afterbegin",e.innerHTML),document.body.appendChild(c.firstChild),(i="gallery"+t.getAttribute("data-gallery"))&&window[i]){for(t.style.setProperty("--num-rows",Math.ceil(window[i].length/3)),r=0;r<window[i].length;r++){var s=window[i][r],u=document.createElement("li"),g=(w=s.o_width,n=s.o_height,g=void 0,{factor:o=(o=1024)<(g=n<w?w:n)?o/g:1,width:Math.round(w*o),height:Math.round(n*o)}),w=new Image(g.w,g.h);g.width<g.height&&u.classList.add("portrait"),n="https://farm"+s.farm+".staticflickr.com/"+s.server+"/"+s.id+"_"+s.secret,w.setAttribute("data-bgimage",n+"_c.jpg"),w.setAttribute("width",g.width),w.setAttribute("height",g.height),w.setAttribute("alt",s.title||h||`Image ${r} of `+window[i].length),w.setAttribute("data-gallery-index",r),u.appendChild(w),a.push({src:n+"_c.jpg",w:g.width,h:g.height,title:s.title}),!function(){var e=stir.createIntersectionObserver({element:u,threshold:[.9],callback:function(t){(-1==t.intersectionRatio||0<t.intersectionRatio)&&((t=this.querySelector("[data-bgimage]")).src=t.getAttribute("data-bgimage"),t.removeAttribute("data-bgimage"),e)&&e.observer.unobserve(this)}})}(),t.insertAdjacentElement("beforeend",u)}"undefined"!=typeof PhotoSwipe?(t.addEventListener("click",function(t){t.preventDefault(),new PhotoSwipe(document.querySelectorAll(".pswp")[0],PhotoSwipeUI_Default,Array.prototype.slice.call(a),{index:parseInt(t.target.getAttribute("data-gallery-index"))}).init()},!0),t.addEventListener("load",function(t){t.target.parentNode.setAttribute("data-loaded",!0)},!0)):console.error("PhotoSwipe not available!")}}}();