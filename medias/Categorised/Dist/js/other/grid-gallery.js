!function(){var t,e,i,r,n=[];if((t=document.querySelector("[data-gallery]"))&&(e=document.getElementById("template-pswp"))){function a(t){return t&&document.querySelector(t)}function o(t){return t&&t.innerText}function d(t){return t&&t.split("|").shift().trim()}var l,c,h,s=d(o(a("title")))||d(o(a("h1")));if((l=document.createElement("div")).insertAdjacentHTML("afterbegin",e.innerHTML),document.body.appendChild(l.firstChild),(i="gallery"+t.getAttribute("data-gallery"))&&window[i]){for(t.style.setProperty("--num-rows",Math.ceil(window[i].length/3)),r=0;r<window[i].length;r++){var u=window[i][r],g=document.createElement("li"),w=(p=u.o_width,c=u.o_height,w=void 0,{factor:h=(h=1024)<(w=c<p?p:c)?h/w:1,width:Math.round(p*h),height:Math.round(c*h)}),p=new Image(w.w,w.h);w.width<w.height&&g.classList.add("portrait"),c="https://farm"+u.farm+".staticflickr.com/"+u.server+"/"+u.id+"_"+u.secret,p.setAttribute("data-bgimage",c+"_c.jpg"),p.setAttribute("width",w.width),p.setAttribute("height",w.height),p.setAttribute("alt",u.title||s||"Image ".concat(r," of ").concat(window[i].length)),p.setAttribute("data-gallery-index",r),g.appendChild(p),n.push({src:c+"_c.jpg",w:w.width,h:w.height,title:u.title}),!function(){var e=stir.createIntersectionObserver({element:g,threshold:[.9],callback:function(t){(-1==t.intersectionRatio||0<t.intersectionRatio)&&((t=this.querySelector("[data-bgimage]")).src=t.getAttribute("data-bgimage"),t.removeAttribute("data-bgimage"),e&&e.observer.unobserve(this))}})}(),t.insertAdjacentElement("beforeend",g)}"undefined"!=typeof PhotoSwipe?(t.addEventListener("click",function(t){t.preventDefault(),new PhotoSwipe(document.querySelectorAll(".pswp")[0],PhotoSwipeUI_Default,Array.prototype.slice.call(n),{index:parseInt(t.target.getAttribute("data-gallery-index"))}).init()},!0),t.addEventListener("load",function(t){t.target.parentNode.setAttribute("data-loaded",!0)},!0)):console.error("PhotoSwipe not available!")}}}();