var stir=stir||{};stir.funnelback=stir.funnelback||(()=>{const e="dev"===UoS_env.name||"qa"===UoS_env.name||"preview"===UoS_env.name?"stage-shared-15-24-search.clients.uk.funnelback.com":"search.stir.ac.uk",t=`https://${e}/s/`;return{getHostname:()=>e,getJsonEndpoint:()=>new URL("search.json",t),getScaleEndpoint:()=>new URL("scale",t)}})(),function(){const m="dev"===UoS_env.name||"qa"===UoS_env.name,o={relatedCourses:e=>`<li><a href="${e.liveUrl}">${e.metaData.award||""} ${e.title}</a></li>`,relatedNews:e=>`<article class="cell large-4 medium-6 small-12" aria-label="${e.title.split("|").shift().trim()}">
		${o.link(e.liveUrl,o.image(e.metaData.image.split("|").slice(-1)[0],e.metaData.imagealt)||o.image("https://www.stir.ac.uk/media/stirling/news/news-centre/generic/airthrey-related-news.jpg","Airthrey Loch"))}
		<time class="u-block u-my-1 u-dark-grey">${stir.Date.newsDate(new Date(e.date))}</time>
		<h3 class="header-stripped u-header--margin-stripped u-mt-1 u-font-normal u-compress-line-height"><a href="${e.liveUrl}" class="c-link u-inline">${e.title.split("|").shift().trim()}</a></h3>
		<p class="text-sm">${e.summary}</p>
		</article>`,image:(e,t)=>e&&t?`<img class="show-for-medium" src="${e}" alt="${t}">`:"",link:(e,t)=>e&&t?`<a href="${e}">${t}</a>`:""},u={relatedCourses:25,relatedNews:3},d={relatedCourses:"&sort=title&SF=[award]&num_ranks="+(u.relatedCourses+1),relatedNews:"&sort=date&SF=[c,d,h1,image,imagealt,tags]&num_ranks="+(u.relatedNews+1)},g=e=>e.liveUrl!==window.location.href;document.querySelectorAll("[data-funnelback-inject]").forEach(t=>{var a,e,r,s,l,i,n,c;t&&(a=t.getAttribute("data-type"),l=t.getAttribute("data-meta-name"),i=t.getAttribute("data-meta-value"),c=t.getAttribute("data-facet-name"),e=t.getAttribute("data-collection"),r=t.getAttribute("data-meta-type"),n=t.getAttribute("data-facet-tag"),n=Array.prototype.slice.call(document.querySelectorAll(`meta[name="${n}"]`)).map(e=>e.content),"subject"===l&&(i=i.split(", ").map(e=>`"${e}"`).join(" ")),i=i,i=((l=l)&&i?`&meta_${l}_orsand=`+i:"")+(l=n,(s=c)&&l.length?l.map(e=>`&${s}=`+e).join(""):"")+(r?"&meta_type="+r:""),n=stir.funnelback.getJsonEndpoint().toString()+(`?collection=${e}&query=!padrenullquery`+i+d[a]),c=e=>{e&&e.response&&e.response.resultPacket&&e.response.resultPacket.results.length&&(t.innerHTML=e.response.resultPacket.results.filter(g).slice(0,u[a]).map(e=>o[a](e)).join("")||"")},m?stir.getJSONAuthenticated(n,c):stir.getJSON(n,c))})}();