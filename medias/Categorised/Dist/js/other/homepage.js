!function(){var n;if((n=document.querySelector("[data-videoId]"))&&n.addEventListener("ended",function(e){var t,a;n.parentNode&&!(fallback=n.getAttribute("data-fallback-html"))&&(fallback=n.getAttribute("data-fallback-image"))&&(t=new Image,a=n,t.addEventListener("load",function(e){a.insertAdjacentElement("beforebegin",t),a.parentNode.removeChild(a)}),t.src=fallback)}),AOS){function e(e,t){this.setAttribute&&(this.setAttribute("data-aos",e),this.setAttribute("data-aos-duration",t))}for(var t=1e3,a="fade-right",r="fade-left",s="fade-up",o=[{element:".c-promo-area--homepage .c-promo-area__content",action:a,duration:t},{element:".c-promo-area--homepage .c-promo-area__image",action:r,duration:t},{element:".c-research-promo__wrapper",action:s,duration:2e3},{element:".c-international-section .c-bleed-feature__text-container",action:r,duration:t},{element:".c-international-section .c-bleed-feature__image",action:a,duration:t},{element:".c-homepage-news-events",action:s,duration:2e3}],i=0;i<o.length;i++){var c=document.querySelector(o[i].element),l=o[i].action||r,d=o[i].duration||t;c&&e.call(c,l,d)}AOS.init({once:!0,disable:"phone"})}}();var stir=stir||{};stir.loadingProgress=function(e,t){if(e&&t)return e.innerHTML='<p class="cell" data-indicator="load">Loadingâ€¦</p>';e&&!t&&(t=e.querySelector('[data-indicator="load"]'))&&e.removeChild(t)},function(){t=document.querySelector('.promo-container[data-promo-type="news"]'),a=document.querySelector('.promo-container[data-promo-type="events"]');var e,t,a,n={news:t,events:a};if(n.news||n.events){stir.loadingProgress(n.news,!0),stir.loadingProgress(n.events,!0);function r(e,t,a){var n;!1!=e instanceof Array&&(e.pop(),(n=document.createElement("div")).classList.add("small-12","cell","c-news-events__article"),"news"==t.getAttribute("data-promo-type")&&n.classList.add("large-6","medium-12"),t.insertAdjacentElement(a,n),function e(t,a){if(!t instanceof Array||t.length<1)return stir.loadingProgress(a,!1),i.call(a);var n=t.shift();stir.loadingProgress(a,!0);var r=new XMLHttpRequest;r.open("HEAD",n.url,!0);r.onload=function(){200<=r.status&&r.status<400?(stir.loadingProgress(a,!1),o.call(a,n)):e(t,a)};r.onerror=function(){e(t,a)};r.send()}(e,n))}var s="?v="+(new Date).getTime();switch(window.location.hostname){case"localhost":e="/pages/data/homepage/homepage.json";break;case"t4appdev.stir.ac.uk":case"t4cms.stir.ac.uk":e=stir.t4Globals.preview.homepagefeed;break;case"www-stir.t4appdev.stir.ac.uk":e=stir.t4Globals.homepagefeed+s;break;case"mediadev.stir.ac.uk":e="data/homepage/homepage.json";break;default:e=stir.t4Globals.homepagefeed+s}stir.getJSON(e,function(e){void 0!==e&&e.news&&(stir.loadingProgress(n.news,!1),n.news&&e.news.primary&&r(e.news.primary,n.news,"afterbegin"),n.news&&e.news.secondary&&r(e.news.secondary,n.news,"beforeend"),stir.loadingProgress(n.events,!1),n.events&&e.events&&r(e.events,n.events,"afterbegin"))})}function o(e){var t=this.parentNode.getAttribute("data-promo-type");this.insertAdjacentHTML("afterbegin",c(e,t))}function i(){var e="https://www.stir.ac.uk/",t=this.parentNode.getAttribute("data-promo-type"),a=t&&"news"==t;this.insertAdjacentHTML("beforeend",c({linktext:a?"Read more":"University events",url:e+(a?"news/":"events/"),title:a?"University news centre":"Events at the University of Stirling",image:e+"/webcomponents/dist/images/homepage/default-"+(a?"news":"event")+".jpg",summary:a?"Visit our news centre to find out more about our top stories.":"",_uos:{location:a?"":"Many events at the University are open to the public and free of charge. View more information on our public lectures, exhibitions and other events."}},t))}function c(e,t){e._uos=e._uos||{};var a=[],n=(e._uos.startDate!==e._uos.endDate?" until "+e._uos.endDate:"")+"<br>",r=e._uos.location?'<span class="u-block u-my-1 u-grey--dark">'+e._uos.location+"</span>":"",n=e._uos.startDate?'<time class="u-block u-my-1 u-grey--dark>'+e._uos.startDate+n+"</time>":"",s="news"==t,t="events"==t;return e.image&&a.push('<a href="'+e.url+'" ><img class="show-for-medium" src="'+e.image+'" alt="'+e.imagealt+'" loading="lazy"></a>'),t&&a.push('<h3 class="header-stripped u-my-1 u-font-normal u-compress-line-height"><a href="'+e.url+'" class="c-link u-inline">'+e.title+'</a></h3><div class="u-my-1">'+n+r+"</div>"),s&&a.push('<h3 class="header-stripped u-my-1 u-font-normal u-compress-line-height"><a href="'+e.url+'" class="c-link u-inline">'+e.title+"</a></h3>"),s&&a.push('<p class="text-sm">'+e.summary+"</p>"),a.join("\n")}}();