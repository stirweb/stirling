!function(e){var t,n,s,a,c,i,u,o,l,r;e&&(t={resultsArea:e,searchForm:stir.node("#staff-search__form"),searchInput:stir.node("#staff-search__query"),searchLoading:stir.node(".c-search-loading-fixed"),postsPerPage:20,noPageLinks:9,searchUrl:"https://www.stir.ac.uk/s/search.json?collection=stir-research-hub&meta_T_and=profile&fmo=true&SF=[c,I,faculty,role,firstname,lastname]&num_ranks=".concat(20)},Object.freeze(t),n=function(e,r,t){function a(e){return e.response.resultPacket&&e.response.resultPacket.results.length}var n,r=o(r);return t.error?r(stir.getMaintenanceMsg()):a(t)?a(t)?(n=s(e),stir.compose(r,n,stir.clone)(t.response.resultPacket)):void 0:r(u(e.query))},s=stir.curry(function(e,r){return"\n          ".concat(i(r.resultsSummary),"\n          ").concat(stir.join("",stir.map(a,r.results)),"\n          ").concat(c(r.resultsSummary,e))}),a=function(e){return'\n          <div class="cell medium-10 c-search-result u-small-margin-top ">\n            <p class="c-search-result__link">\n              <a href="'.concat(e.clickTrackingUrl,'">').concat(e.title.split(" | ")[0],'</a>\n            </p>\n            <p class="c-search-result__summary">').concat(e.summary,"</p>\n          </div>")},c=function(e,r){return'\n          <div class="cell ">\n            <div class="grid-container u-margin-y">\n              <div class="grid-x grid-padding-x" id="pagination-box">\n                '.concat(StirSearchHelpers.formPaginationHTML(e.fullyMatching,e.numRanks,Math.floor(e.currStart/e.numRanks+1),r.noPageLinks),"\n              </div>\n            </div>\n          </div>")},i=function(e){return'\n          <div class="cell medium-10">\n            <p>Showing '.concat(e.currStart,"-").concat(e.currEnd," of <strong>").concat(e.fullyMatching," results</strong></p>\n          </div>")},u=function(e){return'\n          <div class="cell medium-10">\n            <p>No results found for search "'.concat(e,'".</p>\n          </div>')},o=stir.curry(function(e,r){return e.searchLoading&&(e.searchLoading.style.display="none"),e.resultsArea.innerHTML=r,stir.scrollToElement(e.resultsArea,30),e.resultsArea}),t.resultsArea.addEventListener("click",function(e){var r=QueryParams.get("query")||"";e.target.matches("#pagination-box a")&&(l(e.target.getAttribute("data-page"),r,t),e.preventDefault()),e.target.matches("#pagination-box a span")&&(l(e.target.parentNode.getAttribute("data-page"),r,t),e.preventDefault())},!(l=function(e,r,t){t.searchLoading&&(t.searchLoading.style.display="flex"),QueryParams.set("page",e),QueryParams.set("query",r);var a={page:e,query:t.searchInput.value=r,noPageLinks:t.noPageLinks,postsPerPage:t.postsPerPage,start:(e-1)*t.postsPerPage+1};stir.getJSON(t.searchUrl+"&start_rank="+a.start+"&query="+encodeURIComponent(a.query),function(e){return n(a,t,e)})})),t.searchForm&&t.searchForm.addEventListener("submit",function(e){e.preventDefault();e=t.searchInput.value||"";l(1,e,t)},!1),e=QueryParams.get("query")||"",r=stir.isNumeric(QueryParams.get("page"))?parseInt(QueryParams.get("page")):1,l(r,e,t))}(stir.node("#staff-search__results"));