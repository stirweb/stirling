var stir=stir||{},KISWidgetCaller=(stir.t4Globals=stir.t4Globals||{},stir.components=stir.components||{},stir.components.unistats=stir.components.unistats||{},stir.components.discoveruni=stir.components.discoveruni||{},stir.components.unistats.widget=function(e){var t=document.createElement("iframe");return t.src="https://widget.unistats.ac.uk/Widget/10007804/"+kiscode+"/responsive/small/en-GB/"+kismode,t.setAttribute("title","Unistats widget for "+kiscode+" ("+kismode+")"),t.classList.add("c-course-unistats-widget"),t},stir.components.id=function(){var e=0;return{getNewId:function(){return++e}}}(),stir.components.discoveruni.widget=function(e){var t=document.createElement("div");return t.setAttribute("data-institution",10007804),t.setAttribute("data-course",e.kiscode),t.setAttribute("data-kismode",e.kismode),t.setAttribute("data-orientation","responsive"),t.setAttribute("data-language","en-GB"),t},stir.components.accordion=function(e){var t=stir.components.id.getNewId(),o=document.createElement("div"),r=document.createElement("h2"),s=document.createElement("a"),i=document.createElement("div");return e.id&&o.setAttribute("id",e.id),o.classList.add("stir-accordion"),s.innerText=e.title||"Show more",s.id="accordion-js-"+t,s.setAttribute("class","stir-accordion--btn"),s.setAttribute("aria-controls","panel-js-"+t),i.id="panel-js-"+t,i.setAttribute("data-tab-content",""),i.setAttribute("role","region"),i.setAttribute("aria-labelledby","accordion-js-"+t),i.setAttribute("class","stir__slideup stir__slidedown"),r.appendChild(s),o.appendChild(r),o.appendChild(i),o},stir.renderKISWidgets=function(e,i){var t,o="www.stir.ac.uk"!=window.location.hostname,i=i||document.querySelector("#kis-widget"),r=document.createDocumentFragment(),s=/^U\d{2}-[A-Z]{2,3}([A-Z]{3})?$/,n=[];if(o&&(console.info("[Discover Uni] kiscodes:",e,e.length),console.info("[Discover Uni] kiswidget:",i)),i&&e){i.setAttribute("data-initialised",!0),i.innerHTML="",i.classList.remove("grid-x");for(var a=i.hasAttribute("data-unistats"),l=0;l<e.length;l++){var c,d=e[l].split(":")[0].trim(),u=e[l].split(":")[1]?"parttime":"fulltime";""===d?o&&console.info("[Discover Uni] Empty kiscode",l):s.test(d)?(c=(a?stir.components.unistats:stir.components.discoveruni).widget({kiscode:d,kismode:u}),n.push(c)):console.error("Invalid KIS code: "+d),c&&r.appendChild(c)}i.appendChild(r),t=document,a||t.getElementById("unistats-widget-script")||((t=t.createElement("script")).id="unistats-widget-script",t.src="https://discoveruni.gov.uk/widget/embed-script/",t.addEventListener("load",function(e){var t,o,r;1<n.length&&window.DiscoverUniWidget&&(t=!1,o=0,r=new stir.components.accordion({id:"morewidgets",title:"View more Discover Uni information"}),i.insertAdjacentElement("afterend",r),new stir.accord(r),r=r.querySelector("[data-tab-content]"),DiscoverUniWidget.prototype._addCss=DiscoverUniWidget.prototype.addCss,DiscoverUniWidget.prototype.addCss=function(){t||this._addCss(),t=!0},DiscoverUniWidget.prototype._renderWidget=DiscoverUniWidget.prototype.renderWidget,DiscoverUniWidget.prototype.renderWidget=function(){this._renderWidget.apply(this,arguments),this.targetDiv.classList.contains("no-data")||1<++o&&r.appendChild(this.targetDiv)});for(var s=0;s<n.length;s++)n[s].classList.add("kis-widget"),n[s].id="kis-widget_"+(s+1),new DiscoverUniWidget(n[s])}),document.head.appendChild(t))}},function(){return!1});!function(){var e,t,o;self.stir&&stir.t4Globals&&stir.t4Globals.clearing&&stir.t4Globals.clearing.open&&stir.t4Globals.clearing.showPromos&&(e=document.getElementById("clearing-banner-template"),t=document.querySelector(".c-course-title-sticky-menu"),(o=document.querySelector(".c-course-datasheet"))&&e&&e.innerHTML&&(o.insertAdjacentHTML("afterend",e.innerHTML),t)&&t.parentElement.removeChild(t),o=document.getElementById("clearing-advert-template"),(e=document.querySelector(".c-course-datasheet"))&&o&&o.innerHTML&&e.insertAdjacentHTML("afterend",o.innerHTML),new UoS_StickyWidget(document.querySelector(".u-sticky")),t=document.getElementById("course-ctas"),e=document.querySelector(".c-whats-next"),t&&e&&(e.insertAdjacentElement("beforebegin",t),e.classList.remove("u-margin-top"),t.classList.add("u-margin-top")),o=document.getElementById("c-course-tabs"))&&(o.style.top="-1px")}(),function(){var e,t;stir.t4Globals.unistats&&(e=document.querySelector(".ug-overview-accordion__kis-widget"),0<(t=stir.t4Globals.unistats.split("|").pop().split(",")).length)&&(stir.renderKISWidgets(t),e)&&(e.style.display="block")}(),stir.favourites&&stir.coursefavs&&(stir.coursefavs.attachEventHandlers(),document.querySelectorAll("[data-nodeid=coursefavsbtn]").forEach(stir.coursefavs.doCourseBtn)),(stir=stir||{}).dpt=function(){const o="www.stir.ac.uk"!=window.location.hostname,v=2,s={css:{truncateModuleCollection:"c-course-modules__accordion-content--hide-rows"},text:{fewer:"View fewer choices",more:"View all _X_ choices"}};let h={},f=0,g=[],r;function i(){f=0,g=[]}const n={UG:"opt=runcode&ct=UG",PG:"opt=runpgcode&ct=PG"};var e="https://portal.stir.ac.uk";const a={viewer:"www.stir.ac.uk"!=window.location.hostname?"https://stiracuk-cms01-production.terminalfour.net/terminalfour/preview/1/en/33273":"/courses/module/",calendar:e+"/calendar/calendar",servlet:e+"/servlet/CalendarServlet",route:{UG:"?opt=menu&callback=stir.dpt.show.routes",PG:"?opt=pgmenu&ct=PG&callback=stir.dpt.show.routes"},option:(e,t)=>`?opt=${e.toLowerCase()}-opts&rouCode=${t}&ct=${e.toUpperCase()}&callback=stir.dpt.show.options`,fees:(e,t)=>`?opt=${e}-opts&rouCode=${t}&ct=${e.toUpperCase()}&callback=stir.dpt.show.fees`,modules:(e,t,o,r)=>`?${n[e.toUpperCase()]}&moa=${o}&occ=${r}&rouCode=${t}&callback=stir.dpt.show.modules`,module:(e,t,o)=>stir.akari.get.module([e,t,o].join("/"))};a.version={UG:UoS_env.t4_tags?'<t4 type="media" id="178111" formatter="path/*" />':a.servlet+"?opt=version-menu&callback=stir.dpt.show.version",PG:UoS_env.t4_tags?'<t4 type="media" id="178112" formatter="path/*" />':a.servlet+"?opt=version-menu&ct=PG&callback=stir.dpt.show.version"};const l=(e,t,o)=>{h.type=e,h.rouCode=t,h.auto=o,stir.getJSONp(""+a.servlet+a.option(e,t))},c=(e,t,o,r)=>stir.getJSONp(""+a.servlet+a.modules(e.toLowerCase(),t,o,r)),t=e=>{var t=`${a.viewer}?code=${e.modCode}&session=${e.mavSemSession}&semester=${e.mavSemCode}&occurrence=${e.mavOccurrence}&course=`+(!(t=document.querySelector("link[rel='canonical']").getAttribute("href")?document.querySelector("link[rel='canonical']").getAttribute("href").split("/"):[]).length||t.length<3?"":"preview"===UoS_env.name?t[t.length-1]:t[t.length-2]);return u(e)?`<a href="${t}">${e.modName}</a>`:`<span data-dpt-unavailable title="Module details for ${e.modCode} are currently unavailable">${e.modName}</span>`},w={collection:{table:(e,t,o)=>`<table class=c-course-modules__table id="collection_${e}"${o?" data-truncated-list":""}>${t}</table>`,notes:e=>`<p class=c-course-modules__collection-notes>${e}</p>`,header:e=>`<p class=c-course-modules__collection-header>${e}</p>`,footer:e=>`<p class=c-course-modules__pdm-note>${e}</p>`},module:e=>`<tr><td>${t(e)}
			<span class=c-course-modules__module-code>(${e.modCode})</span>
			</td><td>${e.modCredit} credits</td></tr>`,nodata:"<tr><td colspan=2> no data </td></tr>",container:e=>`<div class="c-wysiwyg-content ${s.css.truncateModuleCollection}" data-collection-container>${e}</div>`},d=e=>e.modName?w.module(e):w.nodata,y=e=>e%v==0?v:e%v,u=e=>null!==e.mavSemSemester&&0!==e.mavSemSemester.length&&"[n]"!==e.mavSemSemester&&"Not Available"!==e.mavSemSemester,b=stir.curry((e,t,o)=>{var r,e=[e,o].join(""),o=4<t.mods.length;return w.collection.header(-1<(r=t.collectionStatusCode).indexOf("E")?"Option module":"D"===r?"Dissertation":"Compulsory module")+("LIST"==t.collectionType||"CHOICE"==t.collectionType?w.collection.notes(t.collectionNotes):"")+w.collection.table(e,t.mods.map(d).join(""),o)+(t.collectionFootnote?w.collection.footer(t.collectionFootnote):"")+(o?`<p class="text-center c-course-modules__view-more-link">
						<a href="#" data-choices="${t.mods.length}" aria-expanded="false" aria-controls="collection_${e}">${s.text.more.replace("_X_",t.mods.length)}</a>
					</p>`:"")}),C=e=>{var t=document.createElement("p");return t.textContent=e,t};const p=(e,t)=>e.versionId<t.versionId?-1:e.versionId>t.versionId?1:0,m=e=>{let d=document.createDocumentFragment(),u=document.createElement("select");u.classList.add("c-viewer"),u.addEventListener("change",e=>{document.querySelectorAll("div[data-semester]").forEach(e=>e.style.display="none"),document.querySelectorAll('div[data-semester="'+u.options[u.selectedIndex].value+'"]').forEach(e=>e.style.display="block")});let p=[],m=[];e.semesterGroupBeans.forEach((e,c)=>{e.groupOptions.forEach((e,a,l)=>{e.semestersInOption.forEach((e,t)=>{var o,r,s,i=document.createElement("div"),n=[c,a,t].join(""),t=((e,t,o,r)=>{if(h&&h.type)return"UG"===h.type?stir.cardinal(Math.ceil(e.semesterCode/v)):"PG"===h.type?(0===t&&0===o&&0===r?(f++,g.push(e.semesterName)):-1===g.indexOf(e.semesterName)&&0===o?g.push(e.semesterName):0===o&&((g=[]).push(e.semesterName),f++),stir.cardinal(f)):" \x3c!-- year not defined --\x3e "})(e,c,a,t);i.setAttribute("data-semester",n),u.append((o=n,s=`Year ${t}: ${s=e,s.semesterName?s.semesterName+" semester":"semester "+stir.cardinal(y(s.semesterCode))} `+(s=a,1<l.length?`(option ${stir.cardinal(s+1)})`:""),(r=document.createElement("option")).value=o,r.textContent=s,r)),1<l.length&&-1===m.indexOf(t)&&(m.push(t),p.push(stir.cardinal(l.length)+" alternative paths in year "+t)),i.insertAdjacentHTML("beforeend",w.container(e.collections.map(b(n)).join(""))),d.append(i)})})}),d.prepend(u);var t,o=stir.templates.course.div();return o.classList.add("u-bg-heritage-green","u-white--all","u-px-1"),o.style.paddingBottom="1rem",0<p.length&&((t=document.createElement("p")).innerHTML=`<span class="uos-shuffle"></span> <strong>There are ${stir.Array.oxfordComma(p,!0)}. Please review all options carefully.</strong>`,t.classList.add("c-callout","info"),t.style.margin="0",o.append(t)),e.initialText&&o.prepend(C("initialText: "+e.initialText)),e.pdttRept&&((t=document.createElement("p")).appendChild(stir.createDOMFragment(e.pdttRept)),e.pdttRept)&&o.prepend(t),(p.length||e.initialText||e.pdttRept)&&d.prepend(o),Array.prototype.forEach.call(d.querySelectorAll("[data-collection-container]"),function(e){var t=e.querySelector(".c-course-modules__view-more-link a");t&&t.addEventListener("click",function(e){this.classList&&(this.classList.toggle(s.css.truncateModuleCollection)?(stir.scrollToElement(this,60),e.target.innerText=s.text.more.replace("_X_",e.target.getAttribute("data-choices")),e.target.setAttribute("aria-expanded","false")):(e.target.innerText=s.text.fewer,e.target.setAttribute("aria-expanded","true")),e.preventDefault())}.bind(e))}),d.querySelectorAll('div[data-semester]:not([data-semester="'+u.options[u.selectedIndex].value+'"])').forEach(e=>e.style.display="none"),d},S=e=>`<option value="${e.join("|")}">Starting ${e[3]}, ${e[1].toLowerCase()} (${e[4]})</option>`,_=(e,t)=>{var o=document.createElement("label");const r=document.createElement("select");o.append(document.createTextNode("Select a course")),o.setAttribute("for",t),r.name=t,r.id=t,o.append(r),e.forEach&&e.forEach(e=>r.append((e=>{const t=document.createElement("option");return e.rouName&&e.rouCode?(t.textContent=""+e.rouName,t.value=e.rouCode):t.textContent=e,t})(e)));t=e=>{i(),stir.dpt.reset.modules(),h.rouCode=r[r.selectedIndex].value,h.rouName=r[r.selectedIndex].textContent,l(h.type,h.rouCode,h.auto)};return r.addEventListener("change",t),t(),o};return{show:{fees:new Function,routes:new Function,options:new Function,modules:new Function,version:new Function},get:{options:l,routes:(e,t,o)=>{h.type=e,h.auto=o,stir.dpt.show.routes=r(t.replace(/\s/g,"").split(",")),stir.getJSONp(""+a.servlet+a.route[e.toUpperCase()])},viewer:()=>a.viewer,version:e=>stir.getJSONp(""+a.version[e])},reset:{modules:new Function},set:{viewer:e=>a.viewer=e,show:{routes:o=>r=stir.curry((t,e)=>o(_(e.filter(e=>t.includes(e.rouCode)),"rouCode"))),options:s=>stir.dpt.show.options=e=>{var t,o,r;s(!(t=e)||t.length&&t.length<2?new Comment(t.map(S).join("")):((o=document.createElement("div")).id="course-modules-container__options-list",o.append(C(`There are ${stir.cardinal(t.length)} options for this course in the current academic year:`)),r=document.createElement("select"),o.append(r),r.id="course-modules-container__routes-select",r.insertAdjacentHTML("afterbegin",t.map(S).join("")),r.addEventListener("change",function(e){var t=this.options[this.selectedIndex].value.split("|"),o=t[0],t=t[2];i(),stir.dpt.reset.modules(),c(h.type,h.rouCode,o,t)}),o)),h.auto&&h.type&&h.rouCode&&c(h.type,h.rouCode,e[0][0],e[0][2])},modules:t=>stir.dpt.show.modules=e=>t(m(e)),version:t=>stir.dpt.show.version=e=>t((e=>{if(e&&e.length&&o)try{return e.filter(e=>"Y"===e.versionActive).sort(p).pop().versionName}catch(e){console.warn(e)}})(e))},reset:{modules:e=>stir.dpt.reset.modules=e}},debug:{version:e=>{console.info(e)}}}}(),(stir=stir||{}).t4Globals=stir.t4Globals||{},function(t){var r,e,o,s;function i(e){1===this.nodeType&&(e?this.classList.remove("hide"):this.classList.add("hide"))}function n(e){i.call(e,!0)}function a(e){i.call(e,!1)}function l(){a(e),c().forEach(a)}function c(e){return Array.prototype.slice.call(t.querySelectorAll("[data-region"+(e?'="'+e+'"':"")+"]"))}t&&(r=t.querySelector("select"),e=t.querySelector("table"),o=Array.prototype.slice.call(t.querySelectorAll('[data-action="change-region"]')),l(),r.id||(r.id="change-region"),r.addEventListener("change",function(){l(),(s=this.options[this.options.selectedIndex].value)&&(n(e),c(s).forEach(n))}),o.forEach(function(e,t){var o=document.createElement("a");e.childNodes&&o.appendChild(e.childNodes[0]),e.appendChild(o),o.setAttribute("tabindex","0"),o.setAttribute("href","#"),o.setAttribute("aria-controls",r.id),o.addEventListener("click",function(e){r.value=this.parentNode.getAttribute("data-value"),r.dispatchEvent(new Event("change")),e.preventDefault(),r.focus()})}))}(document.getElementById("course-fees-information"));(stir=stir||{}).templates=stir.templates||{},stir.templates.course={link:(e,t)=>`<a href="${t}">${e}</a>`,para:e=>`<p>${e}</p>`,option:e=>`Starting ${e[3]}, ${e[1].toLowerCase()} (${e[4]})`,div:(e,t)=>{var o=document.createElement("div");return e&&(o.id=e),o.onclick=t,o},paths:(e,t)=>`<p class="c-callout info"><strong><span class="uos-shuffle"></span> There are ${e} alternative paths in year ${t}.  Please review all options carefully.</strong></p>`,offline:'<p class="text-center c-callout">Module information is temporarily unavailable.</p>'},stir.course=function(){var e={auto:new Function};if(!stir.dpt)return e;const t=document.getElementById("course-modules-container");var o=document.querySelector("[data-modules-route-code][data-modules-course-type]");if(!t||!o)return e;e=stir.templates.course.div();const r=stir.templates.course.div("optionBrowser"),s=stir.templates.course.div("optionBrowser"),i=stir.templates.course.div("moduleBrowser"),n=document.querySelector("time[data-sits]");i.classList.add("u-heritage-line-bottom");let a=!1;const l={route:o.getAttribute("data-modules-route-code"),level:o.getAttribute("data-modules-course-type"),auto:!0},c=e=>r.append(e),d=e=>s.append(e),u=e=>{i.append(e),Array.prototype.forEach.call(t.querySelectorAll(".stir-accordion"),function(e){new stir.accord(e,!0)})},p=e=>n&&e&&(n.textContent=e),m=()=>i.innerHTML="";e.classList.add("u-bg-heritage-green","u-white--all","u-px-1"),e.innerHTML='<h2 class=header-stripped style="padding:0;margin:0;">Module explorer</h2>',e.append(s),t.append(r,e,i),stir.dpt.set.show.routes(c),stir.dpt.set.show.options(d),stir.dpt.set.show.modules(u),stir.dpt.set.show.version(p),stir.dpt.set.reset.modules(m);o=()=>{a||(a=!0,n&&stir.dpt.get.version(l.level),0<=l.route.indexOf(",")?stir.dpt.get.routes(l.level,l.route,l.auto):stir.dpt.get.options(l.level,l.route,l.auto))},e=t.closest&&t.closest(".stir-tabs__content");return e&&1===window.location.hash.indexOf(e.id)&&o(),{auto:o}}();var StirUniModules=StirUniModules||{};StirUniModules.initialisationRoutine=stir.course.auto,function(){if(stir.node(".c-course-related__buttons"))stir.each(e=>{var t;(t=e).children[0]&&t.children[0].hasAttribute("href")&&(t.onclick=()=>window.location=t.children[0].attributes.href.value)},stir.nodes(".c-course-related__buttons ul li"))}(),function(){var e=stir.nodes("[data-applyslidelink]"),t=stir.nodes(".skip-link");const i=stir.node(".c-course-title__buttons"),r={small:50,medium:150},n=["WARNING!! Missing apply now button anchor location ID","Please inform a dev!! "];if(e||t){const a=e=>{e=e.split("#");return 1<e.length?e[1]:""},s=(e,t)=>{let o=t;for(;null!==o;){if(o.classList&&o.classList.contains(e))return o;o=o.parentNode}return null},l=(e,t)=>{var e=document.getElementById(e),o=s("stir-tabs__content",e),o=(!o||(o=o.previousElementSibling).classList.contains("stir-tabs__tab--active")||o.click(),s("stir-accordion",e));!o||(o=o.children[0].children[0]).hasAttribute("aria-expanded")&&"false"!==o.getAttribute("aria-expanded")||o.click(),e&&stir.scrollToElement(e,t)},o=e=>{var t,o=a(e.target.href);o&&document.getElementById(o)&&(t=r[stir.MediaQuery.current]||100,l(o,t),e.preventDefault())},c=e=>{e.addEventListener("click",o)};e&&stir.each(e=>{var t,o,r,s;t=e,o=i,r=n,s=a(t.getAttribute("href")),document.getElementById(s)||("prod"!==UoS_env.name&&o&&o.insertAdjacentHTML("beforeend",'<p class="alert callout">'+r[0]+" "+s+" "+r[1]+"</p>"),"prod"===UoS_env.name&&t.classList.add("hide")),c(e)},e),t&&stir.each(c,t)}}(),function(){var e,t=stir.node(".c-course-title-sticky-menu"),o=stir.node("#course-sticky-close-btn"),r=stir.node(".c-course-title__buttons"),s=!0;function i(){s&&(window.scrollY>e&&t.classList.add("stir__slidedown"),window.scrollY<e)&&t.classList.remove("stir__slidedown")}function n(){window.requestAnimationFrame(i)}t&&(e=r?r.offsetTop+r.offsetHeight:0,"small"!==stir.MediaQuery.current)&&(t.classList.add("stir__slideup"),t.style.display="block",r&&window.addEventListener("scroll",n),o)&&(o.onclick=function(e){s=!1,window.removeEventListener("scroll",n),t.parentNode.removeChild(t),e.preventDefault()})}(),function(e){if(e){var t="search.stir.ac.uk",o="https://"+t;const r=stir.curry((e,t)=>`https://${e}/s/scale?url=${encodeURIComponent(t)}&width=800&height=800&format=jpeg&type=crop_center`)(t),s={SF:"[profileDegreeTitle,profileCountry,profileCourse,profileCourse1,profileCourse1Url,profileCourse1Modes,profilecourse1Delivery,profileCourse2,profileCourse2Url,profilecourse2Delivery,profileCourse2Modes,profileFaculty,profileSubject,profileYearGraduated,profileLevel,profileTags,profileSnippet,profileImage,profileMedia]",collection:"stir-www",sortBy:"metaprofileImage",tags:"[student alum]",postsPerPage:9,noOfPageLinks:9,urlBase:o},i=e=>e.replace("| Student Stories | University of Stirling","").trim(),n=e=>`
      <div id="pullquote-77513" class="pullquote pullquote-pic ">
            <img src="${r("https://stir.ac.uk"+e.metaData.profileImage)}" alt="${i(e.title)}" loading="lazy"  width="700" height="600">
            <div class="pullquote--text">
              <cite>
                <span class="author">${i(e.title)}</span><br>
                <span class="info">${e.metaData.profileCountry}</span><br>
                <span class="info">${e.metaData.profileDegreeTitle}</span>
              </cite>
              <blockquote cite="#">
                <q>${e.metaData.profileSnippet}</q>
              </blockquote>
              <a href="${e.displayUrl}" aria-label="Read ${i(e.title)}'s story (${i(e.title)})" class="c-link">Read ${i(e.title).split(" ")[0]}'s story</a>
            </div>
        </div>
    `,a=(r,e,t)=>{const s=r.getAttribute("data-testimonials").split("|").filter(e=>e);var o;return!!s.length&&(e=Object.entries(e).map(e=>e[0]+"="+e[1]).join("&"),o=`&query=[${s.map(e=>e).join(" ")}]`,stir.getJSON(t+e+o,e=>{const o=e.response.resultPacket.results;var e=s.map(e=>{var t=e,e=o;return(e=e.filter(e=>{if(i(e.title)===t)return e})).length?n(e[0]):""}).join(" "),t=r.querySelector(".pullquotesbox");t&&stir.setHTML(t,e)}),!0)};e.map(e=>a(e,s,"https://search.stir.ac.uk/s/search.json?"))}}(stir.nodes("[data-testimonials]"));