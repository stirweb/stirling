!function(t){function o(i,t,e){var o=this.toggle.bind(this),s=this.set.bind(this),h=this.update.bind(this),n=this.zoom.bind(this),r=this.reset.bind(this);this.x=0,this.y=0,this.height=300,this.width=300,this.scalingFactor={},this.rect,this.zoomlevels=[200,100],this.radius=this.zoomlevels[0],this.container=i,this.loupe=t,this.map=e,this.zoomed=!1,window.addEventListener("resize",r),window.addEventListener("scroll",r),this.init(),this.loupe.addEventListener("click",function(t){n(),h()}),this.container.addEventListener("click",function(t){i==t.target&&o(!1)}),this.container.addEventListener("pointerleave",function(t){o(!1)}),this.container.addEventListener("pointerenter",function(t){i==t.target&&(o(!0),t.preventDefault())}),this.container.addEventListener("pointermove",function(t){s(t),h()},!1)}t&&(o.prototype.init=function(){this.toggle(!0);var t=this.loupe.getBoundingClientRect();this.toggle(!1),this.width=t.width,this.height=t.height,this.reset()},o.prototype.reset=function(){this.rect=this.container.getBoundingClientRect();var t=this.map.getAttribute("viewBox");t&&(t=t.split(" "),this.scalingFactor.x=t[2]>this.rect.width?t[2]/this.rect.width:this.rect.width/t[2],this.scalingFactor.y=t[3]>this.rect.height?t[3]/this.rect.height:this.rect.height/t[3])},o.prototype.toggle=function(t){this.loupe.style.display=t?"block":"none",t||(this.zoomed=!1)},o.prototype.set=function(t){var i=this.rect.top,e=this.rect.left;this.x=Math.round(t.clientX-e),this.y=Math.round(t.clientY-i)},o.prototype.update=function(){var t=Math.round(this.x*this.scalingFactor.x-this.width/2),i=Math.round(this.y*this.scalingFactor.y-this.height/2),t=t.toString()+" "+i.toString()+" "+this.radius.toString()+" "+this.radius.toString();this.loupe.setAttribute("viewBox",t),this.loupe.style.top=this.y-.8*this.height+"px",this.loupe.style.left=this.x-this.width/2+"px"},o.prototype.zoom=function(){this.radius=this.zoomed?this.zoomlevels[0]:this.zoomlevels[1],this.loupe.style.cursor=this.zoomed?"zoom-in":"zoom-out",this.zoomed=!this.zoomed},Array.prototype.forEach.call(t,t=>{var i,e;t&&t.querySelector&&(i=t.querySelector(".loupe"),e=t.querySelector("svg:not(.loupe)"),i)&&e&&new o(t,i,e)}))}(document.querySelectorAll(".c-zoom"));