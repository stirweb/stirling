function initialize(){var e,g,c=new google.maps.Map(document.getElementById("map"),{zoom:4,center:new google.maps.LatLng(22.821757,57.041016),scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!0,minZoom:3,mapTypeId:google.maps.MapTypeId.ROADMAP}),d=new google.maps.InfoWindow,m=new google.maps.LatLngBounds,f=[];switch(window.location.hostname){case"localhost":e="partners.xml";break;case"stiracuk-cms01-production.terminalfour.net":e="https://stiracuk-cms01-production.terminalfour.net/terminalfour/preview/1/en/3689";break;default:e="/data/our-partners/index.xml"}g="localhost"===window.location.hostname?"":"/webcomponents/",$.ajax({type:"GET",url:e,dataType:"xml",success:function(e){$(e).find("partner").each(function(e){var t,n=$(this).find("title").text(),a=$(this).find("location").text(),o=$(this).find("agreement").text(),i=$(this).find("url").text(),s=$(this).find("lat").text(),p=$(this).find("lng").text(),r=$(this).find("type").text(),l={teaching:g+"dist/images/markers/red_pin.png",research:g+"dist/images/markers/blue_pin.png",default:g+"dist/images/markers/red_pin.png"};s&&p&&((s=new google.maps.Marker({position:new google.maps.LatLng(s,p),map:c,icon:l[r]||l.default})).__meta_type=r,google.maps.event.addListener(s,"click",(t=s,function(){var e=[];e.push("teaching"===r?i?'<p><strong><a href="'+i+'">'+n+'</a></strong><br><span style="font-size: 16px">'+a+'</span><p style="font-size: 16px">'+o+"</p>":"<p><strong>"+n+'</strong><br><span style="font-size: 16px">'+a+'</span><p style="font-size: 16px">'+o+"</p>":"<p>"+n+"</p>"),d.setContent(e.join("")),d.open(c,t)})),m.extend(s.getPosition()),f.push(s))}),c.fitBounds(m)},error:function(){alert("Failed to get xml")}}),$(".c-full-width-map__legend input[type='checkbox']").on("change",function(e){for(var t=$(this).is(":checked"),n=$(this).data("type"),a=0;a<f.length;a++)n===f[a].__meta_type&&f[a].setMap(t?c:null)})}