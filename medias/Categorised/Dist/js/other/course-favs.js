var stir=stir||{};stir.coursefavs=(()=>{if(!stir.favourites)return console.error("[Course Favourites] stir.favourites library not loaded");const a="/favourites/",s=stir.curry((t,e)=>(stir.setHTML(t,e),!0)),i=t=>stir.favourites.isFavourite(t),o=e=>{var t,r=e.closest("[data-nodeid=coursefavsbtn]")||e;r&&(t=stir.favourites.getFavsListAll().find(t=>t.id===e.dataset.id),s(r,t?stir.favourites.renderRemoveBtn(t.id,t.date,a):stir.favourites.renderAddBtn(e.dataset.id,a)))},t=t=>{const e="BUTTON"===t.target.nodeName?t.target:t.target.closest("button");if(e&&e.dataset&&e.dataset.action){const r=e.dataset.id;t={addtofavs:()=>{r&&!i(r)&&stir.favourites.addToFavs(e.dataset.id,"course"),o(e)},removefav:()=>{r&&(stir.favourites.removeFromFavs(r),o(e.parentElement))}}[e.dataset.action];t&&t()}};return{auto:()=>{URL},isFavourite:i,doCourseBtn:o,createCourseBtnHTML:(t,e)=>{var r=document.createElement("div");return r.setAttribute("data-id",t),r.setAttribute("data-favsurl",e),o(r),r.innerHTML},attachEventHandlers:()=>stir.node("main").addEventListener("click",t)}})();