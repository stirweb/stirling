var stir=stir||{};stir.coursefavs=(()=>{if(!stir.favourites)return console.error("[Course Favourites] stir.favourites library not loaded");const a="/favourites/",s=stir.curry((t,e)=>(stir.setHTML(t,e),!0)),r=t=>stir.favourites.isFavourite(t),i=e=>{var t,r=e.closest("[data-nodeid=coursefavsbtn]")||e;r&&(t=stir.favourites.getFavsListAll().find(t=>t.id===e.dataset.id),s(r,t?stir.favourites.renderRemoveBtn(t.id,t.date,a):stir.favourites.renderAddBtn(e.dataset.id,a)))},t=t=>{const e="BUTTON"===t.target.nodeName?t.target:t.target.closest("button");e&&e.dataset&&e.dataset.action&&(t={addtofavs:()=>{r(e.dataset.id)||stir.favourites.addToFavs(e.dataset.id,"course"),i(e)},removefav:()=>{var t=e.dataset.id;t&&(stir.favourites.removeFromFavs(t),i(e.parentElement))}}[e.dataset.action])&&t()};return{auto:()=>{URL},isFavourite:r,doCourseBtn:i,createCourseBtnHTML:(t,e)=>{var r=document.createElement("div");return r.setAttribute("data-id",t),r.setAttribute("data-favsurl",e),i(r),r.innerHTML},attachEventHandlers:()=>stir.node("main").addEventListener("click",t)}})();