!function(t){if(t){const i="accom",o={cookieType:"accom",urlToFavs:t.dataset.favsurl||"",activity:t.dataset.activity||""},d=t;t=stir.node("#search-form");const l=stir.node("#search-price"),n=stir.node("#search-location"),c=stir.node("#search-student-type"),v=stir.node("#search-bathroom"),u=stir.node("#search-price-value");var e=stir.node("#accomfavbtns"),a=stir.node("[data-activity=shared]"),r=stir.node("#accomsharedfavsarea");const m=(t,e,a)=>e.length?stir.favourites.renderRemoveBtn(a,e[0].date,t):stir.favourites.renderAddBtn(a,t),p=stir.curry((t,e)=>{var a,r,s;return e?(a=stir.favourites.getFav(e.id,t.cookieType),`<div class="cell" id="fav-${e.id}">
              <div class="u-bg-white u-heritage-line-left u-border-width-5 u-mb-3">
                <div class="grid-x grid-padding-x u-p-2 ">
                  <div class="cell u-pt-2">
                      <p class="u-text-regular u-mb-2 "><strong><a href="${e.url}">${e.title}</a></strong></p>
                    </div>
                    <div class="cell large-5 text-sm">
                      <p><strong>Price</strong></p> 
                      ${r=e.rooms,r?(s=r.map(t=>parseFloat(t.cost)).sort((t,e)=>t-e),r=stir.removeDuplicates(r.map(t=>t.title)),s[0].toFixed(2)===s[s.length-1].toFixed(2)?`<p>£${s[0].toFixed(2)} per week</p>`:`<p>From £${s[0].toFixed(2)} to £${s[s.length-1].toFixed(2)} per week</p>
            <ul>${r.map(t=>`<li>${t}</li>`).join("")}</ul>`):""}
                    </div>
                    <div class="cell large-4 text-sm">
                        <p><strong>Location</strong></p> 
                        <p>${e.location}</p>
                        <p><strong>Student type</strong></p>
                        <p>${s=e.rooms,s?(s=s.map(t=>t.studType).join(",").split(",").map(t=>t.trim()),stir.removeDuplicates(s).join("<br />")):""}</p>
                    </div>
                    <div class="cell large-3 ">
                        <div><img src="${e.img}" width="760" height="470" alt="Image of ${e.title}" class="u-aspect-ratio-1-1 u-object-cover" /></div>
                    </div>
                    <div class="cell text-sm u-pt-2" id="favbtns${e.id}">
                      ${m(t.urlToFavs,a,e.id)}
                    </div>
                  </div>
              </div>
            </div>`):""}),g=t=>t.id?`<p class="text-sm"><strong><a href="${t.url}" >${t.title} </a></strong></p>`:"",h=t=>t.id?`<div class="cell small-6">
            <div class="u-green-line-top u-margin-bottom">
              <p class="u-text-regular u-py-1"><strong><a href="${t.url}" >${t.title}</a></strong></p>
              <div class="u-mb-1">${t.location} accommodation.</div>
              <div>${stir.favourites.isFavourite(t.id)?'<p class="text-sm u-heritage-green">Already in my favourites</p>':stir.favourites.renderAddBtn(t.id,"")}</div>
            </div>
          </div>`:"";const f=()=>stir.favourites.getFavsList(i),y=stir.curry((e,t)=>{var a;return""!==e&&t.rooms?(a=stir.filter(t=>t.bathroom.toLowerCase().includes(e.toLowerCase()),t.rooms)).length?(t.rooms=a,t):{}:t}),b=stir.curry((t,e)=>""===t||!e.location||t===e.location?e:void 0),F=stir.curry((e,t)=>{var a;return""!==e&&t.rooms?(a=stir.filter(t=>t.studType.includes(e),t.rooms)).length?(t.rooms=a,t):{}:t}),T=stir.curry((e,t)=>{var a;return""!==e&&t.rooms?(a=stir.filter(t=>parseFloat(e)>parseFloat(t.cost),t.rooms)).length?(t.rooms=a,t):{}:t}),$=stir.filter(t=>{if(t&&t.title)return t}),x=stir.join(""),k=stir.curry((t,e)=>e?t.filter(t=>Number(t.id)===Number(e.id))[0]:[]),P=stir.curry((t,e)=>(stir.setHTML(t,e),!0)),Q=(t,e)=>{var a=stir.favourites.getFavsList(t.cookieType),e=stir.map(k(e)),t=stir.map(p(t)),r=P(d),e=stir.compose($,e)(a),a=stir.compose(x,t)(e);return r(a||stir.templates.renderNoFavs)},w=(t,e,a)=>{var t=stir.map(p(t)),r=stir.map(T(e.price)),s=stir.map(F(e.studentType)),i=stir.map(y(e.bathroom)),e=stir.filter(b(e.location)),i=stir.compose($,i,e,s,r,stir.clone)(a),e=stir.compose(x,t)(i);return P(d,`<div class="cell u-mb-3">Results based on filters - <strong>${s=i.length} ${1===s?"property":"properties"}</strong></div>`+e)};var s=(t,e,a)=>{var r,s;t&&((s=(t=>{var e=QueryParams.get("a")||"";if(!e)return null;try{return atob(e).split(",").map(e=>({...t.filter(t=>{if(e===t.id)return t})[0],id:e}))}catch(t){}})(a))?P(t,s.map(h).join("")):P(t,stir.templates.renderNoShared)),e&&(r=a,(t=!(s=f()).length||s.length<1?null:s.sort((t,e)=>e.date-t.date).map(e=>({...r.filter(t=>{if(e.id===t.id)return t})[0],id:e.id,dateSaved:e.date})))?P(e,t.map(g).join("")+stir.templates.renderLinkToFavs):P(e,stir.templates.renderNoFavs))};const L=accommodationData?accommodationData.filter(t=>t.id&&t.id.length):[];"managefavs"===o.activity&&Q(o,L),"shared"===o.activity&&s(a,r,L),"search"===o.activity&&(s=stir.flatten(L.map(t=>t.rooms)).map(t=>Number(t.cost)).sort((t,e)=>t-e),a=Math.ceil(s[0]),r=10*Math.ceil(a/10),a=Math.ceil(s[s.length-1]),s=10*Math.ceil(a/10),l.min=r,l.max=s,l.value=QueryParams.get("price")?QueryParams.get("price"):s,n.value=QueryParams.get("location")?QueryParams.get("location"):"",c.value=QueryParams.get("student")?QueryParams.get("student"):"",v.value=QueryParams.get("bathroom")?QueryParams.get("bathroom"):"",P(u,l.value),a={price:l.value,location:n.value,studentType:c.value,bathroom:v.value},w(o,a,L),t&&t.addEventListener("input",t=>{var e={price:l.value};P(u,e.price)}),t)&&t.addEventListener("change",t=>{QueryParams.set("price",l.value),QueryParams.set("location",n.value),QueryParams.set("student",c.value),QueryParams.set("bathroom",v.value);var e={price:l.value,location:n.value,studentType:c.value,bathroom:v.value};w(o,e,L)}),e&&(stir.node("main").addEventListener("click",t=>{var e,t="BUTTON"===t.target.nodeName?t.target:t.target.closest("button");"clearallfavs"===t.dataset.action&&(stir.favourites.removeType(i),Q(o,L)),"copysharelink"===t.dataset.action&&(t=f(),t="https://www.stir.ac.uk/share/"+btoa(t.map(t=>t.id).join(",")),navigator.clipboard&&navigator.clipboard.writeText(t),(e=stir.t4Globals.dialogs.filter(t=>"shareDialog"===t.getId())).length)&&(e[0].open(),e[0].setContent((e=t)?` <p><strong>Share link</strong></p>  
          ${navigator.clipboard?'<p class="text-xsm">The following share link has been copied to your clipboard:</p>':""}   
          <p class="text-xsm">${e}</p>`:""))}),P(e,stir.templates.renderFavActionBtns)),d.addEventListener("click",t=>{var e,a,t="BUTTON"===t.target.nodeName?t.target:t.target.closest("button");t&&t.dataset&&t.dataset.action&&("addtofavs"===t.dataset.action&&(stir.favourites.addToFavs(t.dataset.id,o.cookieType),a=stir.favourites.getFav(t.dataset.id,o.cookieType),e=stir.node("#favbtns"+t.dataset.id))&&P(e,m(o.urlToFavs,a,t.dataset.id)),"removefav"===t.dataset.action)&&(stir.favourites.removeFromFavs(t.dataset.id),e=stir.favourites.getFav(t.dataset.id,o.cookieType),"searchfavs"===o.activity&&(a=stir.node("#favbtns"+t.dataset.id))&&P(a,m(o.urlToFavs,e,t.dataset.id)),"managefavs"===o.activity)&&(a=stir.node("#fav-"+t.dataset.id))&&P(a,"")})}}(stir.node("#acccomfinder"));