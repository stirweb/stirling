!function(){function e(){const t=new IntersectionObserver(function(e,t){e.forEach(e=>{var t,s,a,r,n;e.isIntersecting?(t=Number(e.target.dataset.value),s=e.target.dataset.unit,r=Number(e.target.dataset.max),n=e.target.dataset.colour||"energy-turq",a=100-(r=t/r*100),r=r/2-.5,n=stir.createDOMFragment(`<div class="barchart-value u-bg-${n} u-absolute" style="right:${98<a?98:a}%"></div>
                                                <div class="barchart-text u-relative u-white u-font-bold text-md u-z-50" style="left:${Math.abs(0==r?1:r)}%">${t}${s}</div>`),e.target.append(n)):e.target.innerHTML=""})},{root:null,threshold:.5});stir.nodes(".barchart").forEach(e=>{t.observe(e)})}const t=stir.curry((e,t,{type:s,hours:a,typekey:r,label:n})=>{return"total"===r?`<div class="u-bg-${e[0].second}--10 u-p-tiny u-p-1 u-text-regular u-mt-1 flex-container u-mb-2">
                <strong class="u-flex1">Total workload</strong>
                <strong>${a} hours</strong>
            </div>`:`
        <div>
            <span class="u-inline-block u-p-tiny u-px-1">${n+": "+(r=s,r[0].toUpperCase()+r.slice(1))}</span>
            <div class="barchart u-relative u-flex align-middle u-overflow-hidden u-bg-medium-grey" data-value="${a}" data-max="${t}" data-unit="" data-colour="${e[0].second}"></div>
        </div>`}),s=(e,t)=>t?`<div class="cell large-${e} u-mb-1">${t}</div>`:"",a=stir.curry((e,{name:t,value:s})=>0===Number(s)?"":`<div>
          <span class="u-inline-block u-p-tiny u-px-1">${t}</span>
          <div class="barchart u-relative u-flex align-middle u-overflow-hidden u-bg-medium-grey" data-value="${s}" data-max="100" data-unit="%" data-colour="${e[0].second}"></div>
        </div>`),r=stir.curry((e,t,s)=>{e=a(e);return(1<t?`<h4 class="u-mt-0">${s.tab}</h4>`:"")+`<p>${s.summary.map(e).join("")}</p>`}),n=stir.curry((e,t)=>t?`<div class="cell large-${e} u-mb-1">${t}</div>`:""),u=stir.curry((e,t)=>(stir.setHTML(e,t),!0)),l=e=>{var s;return"International"===e.tab?{sum:0,summary:[],tab:e.tab,tabAssessments:e.tabAssessments}:{sum:e.tabAssessments.map(e=>Number(e.percent)).reduce((e,t)=>e+t,0),summary:(s=e.tabAssessments.map(e=>e.category)).filter((e,t)=>s.indexOf(e)===t).map(t=>({name:t,value:e.tabAssessments.map(e=>e.category===t?Number(e.percent):0).reduce((e,t)=>e+t,0)})),tab:e.tab,tabAssessments:e.tabAssessments}};var i,o,c,d,m,b,g,v,p;i=JSON.parse(colours),o=JSON.parse(assessments),c=JSON.parse(deliveries),d=multipleAssessmentsText,m=assessmentsFallbackText,b=deliveriesFallbackText,(v=stir.node("#content"))&&v.classList.add("u-padding-bottom"),v=i,p=(p=(c=c).filter(e=>"total"===e.typekey)).length?p[0].hours:null,v=t(v,p),p=Number(p),g=c.filter(e=>"total"!==e.typekey).map(e=>Number(e.hours)).reduce((e,t)=>e+t,0),p=Number(p)!==g?"":c.map(v).join(""),u(stir.node("#deliveries"),(g=b,""+((c=p).length?s("12",c):`<div class="cell ">${g}</div>`))),b=((e,t)=>{e=e.map(l).filter(e=>100===e.sum);const s=r(t,e.length);return e.map(e=>s(e))})(v=o||[],i),u(stir.node("#assessments"),(p=d,c=m,o=(g=b).length<2?"12":"6",o=n(o),o=g.length?g.map(o).join(""):`<div class="cell">${c}</div>`,`${1<g.length?p:""} `+o)),v=i[0].level,u(stir.node("#backbutton"),(d=v,(m=new URLSearchParams(document.location.search)).get("course")?`<a href="${stir.isNumeric(m.get("course"))?"/terminalfour/preview/1/en/"+m.get("course"):`/courses/${d.replace("pg","pg-taught")}/`+m.get("course")}#panel_1_3" id="backtocourseBtn" class="button u-m-0 heritage-green button--back ">Back to course</a>`:"")),e()}();