var stir=stir||{};function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,n,s,c,i=[],o=!0,l=!1;try{if(s=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=s.call(a)).done)&&(i.push(r.value),i.length!==e);o=!0);}catch(t){l=!0,n=t}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(l)throw n}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var a,r,n,s,c="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(c)return r=!(a=!0),{s:function(){c=c.call(t)},n:function(){var t=c.next();return a=t.done,t},e:function(t){r=!0,n=t},f:function(){try{a||null==c.return||c.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(c=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return c&&(t=c),s=0,{s:e=function(){},n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var a;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(a="Object"===(a=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:a)||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}stir.templates=stir.templates||{},stir.const=stir.const||{},stir.templates.search=function(){function r(){return"https://"+stir.funnelback.getHostname()}"dev"!==UoS_env.name&&UoS_env.name;function n(t){var e;return-1<(null==(e=p[f.toLowerCase()])?void 0:e.indexOf(t.toLowerCase()))}function s(t,e){return n(e)?"<p class=c-search-result__summary>".concat(t,"</p>"):m("This page is only available to ".concat(d[e],". You will be asked to log in before you can view it, but once you are logged in results will be shown automatically."))}function c(t){return 1<(t=t.toUpperCase().split("/").slice(-1).toString().split(".")).length&&t[1].match(/PDF|DOCX?/)}function i(t,e){return document.querySelector('input[name="'.concat(t,'"][value="').concat(e,'"],select[name="').concat(t,'"] option[value="').concat(e,'"]'))}function o(t,e,a){return'<span class=c-tag data-name="'.concat(e,'" data-value="').concat(a,'">✖️ ').concat(t,"</span>")}function l(t,e,a,r){return t?(t=-1<t.indexOf("|")?t.split("|")[1]||t.split("|")[0]:t,"<div class=c-search-result__image>\n\t\t".concat(stir.funnelback.getCroppedImageElement({url:t.trim(),alt:e||"",width:a||550,height:r||550}),"\n\t\t</div>")):""}function u(t){return'<a href="'.concat(t.href,'">').concat(t.text,"</a>")}function a(t){return stir.courses&&stir.courses.clearing&&Object.values&&t.clearing&&0<=Object.values(t.clearing).join().indexOf("Yes")}var m=function(t){return'<p class="u-heritage-berry u-border-solid u-p-1"><span class="uos-lightbulb"></span> '.concat(t,"</p>")},d={staff:"University of Stirling staff",students:"current students and staff"},p={staff:["staff","students"],student:["students"]},t=window[["s","e","i","k","o","o","C"].reverse().join("")],f=!!t.get("psessv0")?t.get("psessv0").split("|")[0]:"EXTERNAL";return{tag:o,stag:function(t){return t?'<span class="c-search-tag">'.concat(t,"</span>"):""},tagGroup:function(t){t=t.split("="),t=t[1]&&t[1].replace(/,([^\s])/gi,"__SPLIT__$&").split("__SPLIT__,");return t?t.map(stir.templates.search.stag).join(""):""},breadcrumb:function(t){return'<p class="u-m-0">'.concat(t,"</p>")},trailstring:function(t){return t.length?t.map(u).join(" > "):""},summary:function(t){var e,a=t.response.resultPacket.resultsSummary,r=(a.currEnd,a.totalMatching),a=(a.currStart,stir.String.stripHtml(t.question.originalQuery).replace(/^!padrenullquery$/,"").trim()),n=1<a.length?" for <em>".concat(a,"</em>"):"",r=0<r?'\t<p class="text-sm">There are <strong>'.concat(r.toLocaleString("en")," results</strong>").concat(n,".</p>"):'<p id="search_summary_noresults"><strong>There are no results'.concat(n,"</strong>.</p>"),n=(e=t.question.rawInputParameters,Object.keys(e).filter(function(t){return 0===t.indexOf("meta_")&&e[t][0]}).map(function(a){var t=i(a,e[a]);return t?o(t.innerText||t.parentElement.innerText,a,e[a]):(t=new RegExp(/\[([^\[^\]]+)\]/),e[a].toString().replace(t,"$1").split(/\s/).map(function(t){var e=i(a,t);return e?o(e.parentElement.innerText,a,t):""}).join(" "))}).join(" ")),t=a&&(a=t.response.resultPacket.spell)?'<p>Did you mean <a href="#" data-suggest>'.concat(a.text.split(" ")[0],"</a>?</p>"):"";return'<div class="u-py-2"> '.concat(r," ").concat(n," ").concat(t," </div>")},pagination:function(t){var e=t.currEnd,a=t.totalMatching,t=t.progress;return 0===a?"":'\n\t\t\t<div class="cell text-center u-margin-y">\n\t\t\t\t<progress value="'.concat(t,'" max="100"></progress><br />\n\t\t\t\tYou have viewed ').concat(a===e?"all":e+" of "+a," results\n\t\t\t</div>")},suppressed:function(t){return"\x3c!-- Suppressed search result: ".concat(t," --\x3e")},auto:function(t){var a,e,r,n;return"https://www.stir.ac.uk/"===t.liveUrl?stir.templates.search.suppressed("homepage"):"Course"==t.metaData.type||t.metaData.level?stir.templates.search.course(t):"News"==t.metaData.type?stir.templates.search.news(t):"Gallery"==t.metaData.type?stir.templates.search.gallery(t):"Event"==t.metaData.type||"stir-events"==t.collection?stir.templates.search.event(t):t.metaData.access?stir.templates.search.internal(t):t.metaData.type&&-1<t.metaData.type.indexOf("output")||t.metaData.type&&-1<t.metaData.type.indexOf("contract")?stir.templates.search.research(t):t.metaData.type&&-1<t.metaData.type.indexOf("profile")?stir.templates.search.person(t):0===t.liveUrl.indexOf("https://www.stir.ac.uk/news")?stir.templates.search.news(t):(r=(a={text:(null==(r=t.metaData)||null==(r=r.breadcrumbs)?void 0:r.split(" > ").slice(1,-1))||[],href:new URL(t.liveUrl).pathname.split("/").slice(1,-1)}).text.map(function(t,e){return{text:t,href:"/"+a.href.slice(0,e+1).join("/")+"/"}}),e=-1<t.liveUrl.indexOf("policyblog.stir")?'<div class=" c-search-result__tags"><span class="c-search-tag">Public Policy Blog</span></div>':"",t.metaData.type&&-1<t.metaData.type.indexOf("studentstory")?stir.templates.search.studentstory(t,r):'\n\t\t\t<div class="c-search-result" data-rank='.concat(t.rank).concat(t.metaData.type||c(t.liveUrl)?' data-result-type="'+(t.metaData.type||(c(t.liveUrl)?"document":"")).toLowerCase()+'"':"").concat(t.metaData.access?' data-access="'+t.metaData.access+'"':"",'>\n\t\t\t\t<div class="c-search-result__body u-mt-1 flex-container flex-dir-column u-gap">\n\t\t\t\t\t').concat(e,"\n\t\t\t\t\t").concat((e=r,r=t.liveUrl,n=t.fileSize,e&&0<e.length?stir.templates.search.breadcrumb(stir.templates.search.trailstring(e)):c(r)?"Document: ".concat(c(r)," <small>").concat(stir.Math.fileSize(n||0,0),"</small>"):""),'\n\t\t\t\t\t<p class="u-text-regular u-m-0"><strong><a href="').concat(stir.funnelback.getJsonEndpoint().origin+t.clickTrackingUrl,'">').concat(t.title.split("|")[0].trim().replace(/\xA0/g," "),"</a></strong></p>\n\t\t\t\t\t<p >").concat(t.summary.replace(/\xA0/g," "),"</p>\n\t\t\t\t</div>\n\t\t\t</div>"))},internal:function(t){var e,a={text:(null==(r=t.metaData)||null==(r=r.breadcrumbs)?void 0:r.split(" > "))||[],href:new URL(t.liveUrl).pathname.split("/").filter(function(t){return t})},r=n(t.metaData.group)?stir.templates.search.trailstring(a.text.map(function(t,e){return{text:t,href:"/"+a.href.slice(0,e+1).join("/")+"/"}}).slice(0,-1)):'<a href="https://www.stir.ac.uk/'.concat(a.href[0],'/">').concat(a.text[0],"</a>");return'\n      <div class="c-search-result'.concat((e=t.metaData.group,n(e)?" c-internal-search-result":" c-internal-locked-search-result"),'" data-rank=').concat(t.rank).concat(t.metaData.type?' data-result-type="'+t.metaData.type.toLowerCase()+'"':"",' data-access="').concat(t.metaData.access,'">\n\t\t\t  <div class="c-search-result__body u-mt-1 flex-container flex-dir-column u-gap">\n\t\t\t    <p class="c-search-result__breadcrumb">').concat(r,'</p>\n\t\t\t    <p class="u-text-regular u-m-0"><strong><a href="').concat(stir.funnelback.getJsonEndpoint().origin+t.clickTrackingUrl,'">').concat(t.title.split(" | ")[0],"</a></strong></p>\n\t\t\t    ").concat(s(t.summary,t.metaData.group),"\n\t\t\t  </div>\n\t\t\t</div>")},combo:function(t){var e;return'<li title="'.concat(t.prefix," ").concat(t.title,'">').concat(t.courses.map(stir.templates.search.comboCourse).join(" and ")).concat(null!=t&&null!=(e=t.codes)&&e.ucas?" <small>&hyphen; "+t.codes.ucas+"</small>":"").concat(a(t)?' <sup class="c-search-result__seasonal">*</sup>':"","</li>")},comboCourse:function(t){return'<a href="'.concat(t.url,'">').concat(t.text.replace(/(BAcc \(Hons\))|(BA \(Hons\))|(BSc \(Hons\))|(\/\s)/gi,""),"</a>")},clearing:function(t){if(Object.keys&&t.metaData&&0<=Object.keys(t.metaData).join().indexOf("clearing"))return'<p class="u-m-0"><strong class="u-heritage-berry">Clearing 2022: places may be available on this course.</strong></p>'},combos:function(t){return 0===t.combos.length?"":'\n\t\t\t<div class="combo-accordion" data-behaviour=accordion>\n\t\t\t\t<accordion-summary>Course combinations</accordion-summary>\n\t\t\t\t<div>\n\t\t\t\t\t<p>'.concat(t.title,' can be combined with:</p>\n\t\t\t\t\t<ul class="u-columns-2">\n\t\t\t\t\t\t').concat(t.combos.map(stir.templates.search.combo).join(""),"\n\t\t\t\t\t</ul>\n\t\t\t\t\t").concat(0<=t.combos.map(a).indexOf(!0)?'<p class="u-footnote">Combinations marked with <sup class=c-search-result__seasonal>*</sup> may have Clearing places available.</p>':"","\n\t\t\t\t</div>\n\t\t\t</div>")},pathways:function(t){var e;return!t.metaData.pathways||0===(e=t.metaData.pathways.split("|"))?"":'\n\t\t\t<div class="combo-accordion" data-behaviour=accordion>\n\t\t\t\t<accordion-summary>Course pathways</accordion-summary>\n\t\t\t\t<div>\n\t\t\t\t\t<p>'.concat(t.title,' has the following optional pathways:</p>\n\t\t\t\t\t<ul class="u-columns-2">\n\t\t\t\t\t\t').concat(e.map(function(t){return"<li>".concat(t,"</li>")}).join("\n\t"),"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>")},courseFact:function(t,e,a){return t&&e?'<div class="cell medium-4"><strong class="u-heritage-green">'.concat(t,"</strong><p").concat(a?" class=u-text-sentence-case":"",">").concat(e,"</p></div>"):""},course:function(t){var e=t.metaData.subject?t.metaData.subject.split(/,\s?/).slice(0,1):"",e=(stir.String.slug(e),!!(t.metaData.delivery&&-1<t.metaData.delivery.toLowerCase().indexOf("online"))),a=-1<UoS_env.name.indexOf("preview")?(a=t.metaData.sid)?"/terminalfour/preview/1/en/".concat(a):"#":r()+t.clickTrackingUrl;return t.combos=stir.courses.showCombosFor("preview"==UoS_env.name?t.metaData.sid:t.liveUrl),'\n\t\t\t<div class="c-search-result" data-rank='.concat(t.rank," data-sid=").concat(t.metaData.sid," data-result-type=course").concat(e?" data-delivery=online":"",'>\n\t\t\t\t<div class=" c-search-result__tags">\n\t\t\t\t\t<span class="c-search-tag">').concat(function(t){switch(t){case"module":return"CPD and short courses";case"Postgraduate (taught)":return"Postgraduate";default:return t}}(t.metaData.level||t.metaData.type||""),'</span>\n\t\t\t\t</div>\n\n        <div class="flex-container flex-dir-column u-gap u-mt-1">\n          <p class="u-text-regular u-m-0">\n            <strong><a href="').concat(a,'" title="').concat(t.liveUrl,'">\n            ').concat(t.metaData.award||""," ").concat(t.title,"\n            ").concat(t.metaData.ucas?" - "+t.metaData.ucas:"","\n            ").concat(t.metaData.code?" - "+t.metaData.code:"",'\n            </a></strong>\n          </p>\n          <p class="u-m-0">').concat(t.summary,"</p>\n          ").concat(stir.templates.search.clearing(t)||"",'\n          <div class="c-search-result__meta grid-x">\n            ').concat(stir.templates.search.courseFact("Start dates",t.metaData.start,!1),"\n            ").concat(stir.templates.search.courseFact("Study modes",t.metaData.modes,!0),"\n            ").concat(stir.templates.search.courseFact("Delivery",t.metaData.delivery,!0),"\n          </div>\n          ").concat(stir.templates.search.combos(t),"\n          ").concat(stir.templates.search.pathways(t),"\n        </div>\n\t\t\t</div>")},coursemini:function(t){return'\n\t\t<div>\n\t\t\t<p><strong><a href="'.concat(r()+t.clickTrackingUrl,'" title="').concat(t.liveUrl,'" class="u-border-none">\n\t\t\t\t').concat(t.metaData.award||""," ").concat(t.title," ").concat(t.metaData.ucas?" - "+t.metaData.ucas:""," ").concat(t.metaData.code?" - "+t.metaData.code:"","\n\t\t\t</a></strong></p>\n\t\t\t<p>").concat(t.summary,"</p>\n\t\t</div>")},person:function(t){return"\n\t\t\t<div class=c-search-result data-result-type=person>\n\t\t\t\t<div class=c-search-result__tags>\n\t\t\t\t\t".concat(stir.templates.search.stag(t.metaData.faculty?stir.research.hub.getFacultyFromOrgUnitName(t.metaData.faculty):""),'\n\t\t\t\t</div>\n\t\t\t\t<div class="flex-container flex-dir-column u-gap u-mt-1">\n\t\t\t\t\t<p class="u-text-regular u-m-0"><strong>\n\t\t\t\t\t\t<a href="').concat(r()+t.clickTrackingUrl,'">').concat(t.title.split(" | ")[0].trim(),"</a>\n\t\t\t\t\t</strong></p>\n\t\t\t\t\t<div>").concat(t.metaData.role||"\x3c!-- Job title --\x3e","<br>").concat(t.metaData.faculty||"","</div>\n\t\t\t\t\t\x3c!-- <p>").concat(t.metaData.c?(t.metaData.c+".").replace(" at the University of Stirling",""):"","</p> --\x3e\n\t\t\t\t</div>\n\t\t\t\t").concat(l(t.metaData.image,t.title.split(" | ")[0].trim(),400,400),"\n\t\t\t\t<div class=c-search-result__footer>\n\t\t\t\t\t").concat(stir.funnelback.getTags(t.metaData.category)?"<p><strong>Research interests</strong></p>":"","\n\t\t\t\t\t<p>").concat(stir.funnelback.getTags(t.metaData.category)||"","</p>\n\t\t\t\t</div>\n\t\t\t</div>")},studentstory:function(t,e){return'\n\t  \t<div class=c-search-result data-result-type=studentstory>\n\t  \t\t<div ><a href="'.concat(e[0].href,'">').concat(e[0].text,'</a></div>\n\t\t  \t<div class="c-search-result__body flex-container flex-dir-column u-gap ">\n\t\t\t\t<p class="u-text-regular u-m-0"><strong>\n\t\t\t\t  \t<a href="').concat(r()+t.clickTrackingUrl,'">').concat(t.title.split(" | ")[0].trim(),'</a>\n\t\t\t  \t</strong></p>\n\t\t\t  \t<p class="u-m-0">').concat(t.metaData.profileCourse1,"<br />\n\t\t\t  \t").concat(t.metaData.profileCountry,"</p>\n\t\t\t  \t<p>").concat(t.metaData.c,"</p>\n\t\t\t</div>\n\t\t  ").concat(l("https://www.stir.ac.uk"+t.metaData.profileImage,t.title.split(" | ")[0].trim(),400,400),"\n\t  \t</div>")},news:function(t){return'\n\t\t\t<div class="c-search-result'.concat(t.metaData.image?" c-search-result__with-thumbnail":"",'" data-rank=').concat(t.rank,' data-result-type=news>\n\t\t\t\t\n\t\t\t\t<div class="c-search-result__body flex-container flex-dir-column u-gap u-mt-1">\n\t\t\t\t\t<p class="u-text-regular u-m-0">\n            <strong>\n\t\t\t\t\t\t  <a href="').concat(r()+t.clickTrackingUrl,'">').concat(t.metaData.h1||t.title.split(" | ")[0].trim(),"</a>\n\t\t\t\t\t  </strong>\n          </p>\n          <div >\n\t\t\t\t\t\t\t").concat(t.metaData.d?stir.Date.newsDate(new Date(t.metaData.d)):"",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class="text-sm">').concat(t.summary,"</p>\n\t\t\t\t</div>\n\t\t\t\t").concat(l(t.metaData.image,t.title.split(" | ")[0].trim()),"\n\t\t\t</div>")},gallery:function(t){return'\n\t\t\t<div class="c-search-result c-search-result__with-thumbnail" data-rank='.concat(t.rank,' data-result-type=news>\n\t\t\t\t\n\t\t\t\t<div class=c-search-result__body>\n\t\t\t\t\t<p class="u-text-regular u-m-0"><strong>\n\t\t\t\t\t\t<a href="').concat(r()+t.clickTrackingUrl,'">').concat(t.metaData.h1||t.title.split(" | ")[0].trim(),'</a>\n\t\t\t\t\t</strong></p>\n\t\t\t\t\t<p class="c-search-result__secondary">').concat(stir.Date.newsDate(new Date(t.metaData.d)),"</p>\n\t\t\t\t\t<p >").concat(t.summary,"</p>\t\n\t\t\t\t</div>\n\t\t\t\t<div class=c-search-result__image>\n\t\t\t\t\t").concat(stir.funnelback.getCroppedImageElement({url:(e=JSON.parse(t.metaData.custom)).id?"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_c.jpg"):"",alt:"Image of ".concat(t.title.split(" | ")[0].trim()),width:550,height:550}),"\n\t\t\t\t</div>\n\t\t\t</div>");var e},event:function(t){var e,a,r=(null==(r=t.metaData)?void 0:r.image)||-1<(null==(r=t.metaData)||null==(r=r.tags)?void 0:r.indexOf("Webinar")),n=t.title.split(" | ")[0];return'\n\t\t\t<div class="c-search-result'.concat(r?" c-search-result__with-thumbnail":"",'" data-rank=').concat(t.rank,' data-result-type=event>\n\t\t\t\t<div class="c-search-result__tags">\n\t\t\t\t\t').concat(null!=(r=t.metaData)&&r.tags?t.metaData.tags.split(",").map(stir.templates.search.stag).join(""):"",'\n\t\t\t\t</div>\n\t\t\t\t<div class="c-search-result__body flex-container flex-dir-column u-gap u-mt-1">\n\t\t\t\t\t<p class="u-text-regular u-m-0">\n            <strong>\n\t\t\t\t\t\t  ').concat(t.metaData.register?u({text:n,href:t.metaData.register}):n,'\n\t\t\t\t\t  </strong>\n          </p>\n\t\t\t\t\t<div class="flex-container flex-dir-column u-gap-8">\n\t\t\t\t\t\t<div class="flex-container u-gap-16 align-middle">\n\t\t\t\t\t\t\t<span class="u-icon h5 uos-calendar"></span>\n\t\t\t\t\t\t\t<span>').concat((r=t.metaData.startDate,n=t.metaData.d,r?(r=new Date(r),e=stir.Date.newsDate(r),r=stir.Date.timeElementDatetime(r),!n||(a=(n=n&&new Date(n))&&stir.Date.newsDate(n),n=n&&stir.Date.timeElementDatetime(n),e==a)?'<time datetime="'.concat(r,'">').concat(e,"</time>"):'<time datetime="'.concat(r,'">').concat(e,'</time>–<time datetime="').concat(n,'">').concat(a,"</time>")):'<abbr title="To be confirmed">TBC</abbr>'),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="flex-container u-gap-16 align-middle">\n\t\t\t\t\t\t\t<span class="uos-clock u-icon h5"></span>\n\t\t\t\t\t\t\t<span>').concat((r=t.metaData.startDate,e=t.metaData.d,(r?"<time>".concat(stir.Date.time24(new Date(r)),"</time>"):"")+(e?"–<time>".concat(stir.Date.time24(new Date(e)),"</time>"):"")),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="flex-container u-gap-16 align-middle">\n\t\t\t\t\t\t\t<span class="u-icon h5 uos-').concat(t.metaData.online?"web":"location",'"></span>\n\t\t\t\t\t\t\t<span>').concat(t.metaData.online?"Online":t.metaData.venue||"",'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class="text-sm">').concat(t.summary,"</p>\n\t\t\t\t</div>\n\t\t\t\t").concat(l(t.metaData.image,t.title.split(" | ")[0]),"\n\t\t\t\t").concat(-1<(null==(n=t.metaData)||null==(a=n.tags)?void 0:a.indexOf("Webinar"))?'<div class=c-search-result__image><div class="c-icon-image"><span class="uos-web"></span></div></div>':"","\n\t\t\t</div>")},research:function(t){return'\n\t\t<div class="c-search-result" data-rank='.concat(t.rank).concat(t.metaData.type?' data-result-type="'+t.metaData.type.toLowerCase()+'"':"",'>\n\t\t\t<div>\n\t\t\t\t<div class="c-search-result__tags"><span class="c-search-tag">').concat(t.title.split(" | ").slice(0,1).toString(),'</span></div>\n\t\t\t\t<div class="flex-container flex-dir-column u-gap u-mt-1">\n\t\t\t\t\t<p class="u-text-regular u-m-0"><strong>\n\t\t\t\t\t\t<a href="').concat(stir.funnelback.getJsonEndpoint().origin+t.clickTrackingUrl,'">\n\t\t\t\t\t\t\t').concat(-1<t.title.indexOf("|")?t.title.split(" | ")[1]:t.title,"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</strong></p>\n\t\t\t\t\t").concat(stir.String.stripHtml(t.metaData.c||"")?'<div class="text-sm">'+stir.String.stripHtml(t.metaData.c||"")+"</div>":"","\n          ").concat(stir.funnelback.getTags(t.metaData.category)?"<div class=c-search-result__footer>"+stir.funnelback.getTags(t.metaData.category)+"</div>":"","\n        </div>\n\t\t\t\t\x3c!-- p>12344</ --\x3e\n\t\t\t</div>\n\t\t</div>")},cura:function(t){return t.messageHtml?'<div class="c-search-result-curated" data-result-type=curated-message>\n\t\t\t\t'.concat(t.messageHtml,"\n\t\t\t</div>"):'<div class="c-search-result" data-result-type=curated>\n\t\t\t\t<div class=c-search-result__body>\n\t\t\t\t\t<p class="c-search-result__breadcrumb">'.concat(t.displayUrl,'</p>\n\t\t\t\t\t<p class="u-text-regular u-m-0"><strong>\n\t\t\t\t\t\t<a href="').concat(r()+t.linkUrl,'" title="').concat(t.displayUrl,'">').concat(t.titleHtml,"</a>\n\t\t\t\t\t</strong></p>\n\t\t\t\t\t<p >").concat(t.descriptionHtml,"</p>\n\t\t\t\t\t\x3c!-- <pre>").concat(JSON.stringify(t,null,"\t"),"</pre> --\x3e\n\t\t\t\t</div>\n\t\t\t</div>")}}}(),function(){var e,a,r,n,s,t,c,i,o,l,u=Array.prototype.slice.call(document.querySelectorAll("[name=meta_startval]"));u.length&&(e=[,"January",,,,,,,,"September",,,],a=new RegExp(/\d\d\d\d/),r=new RegExp(/AY\d\d\d\d\D\d\d/i),n=new RegExp(/ay/i),t=(s=u.map(function(t){return{data:t.value,date:t.value.replace(r,""),month:-1<t.value.indexOf("-")&&e[parseInt(t.value.split("-")[1])]||"",year:t.value.match(a)?t.value.match(a).shift():"",acyear:t.value.match(r)?t.value.match(r).shift().replace(n,""):""}})).map(function(t){return t.acyear.replace(n,"")}).filter(function(t,e,a){return a.indexOf(t)===e&&t}),c=u[0].parentElement.parentElement.parentElement,t.length)&&(u.forEach(function(t){t.parentElement.parentElement.remove()}),i=function(t,e,a){var r=document.createElement("input");return r.type=t,r.name=e,r.value=a,r},o=function(t,e){var e=new i("radio","meta_startval","[1st ".concat(e,"]")),a=document.createElement("label");return a.appendChild(e),a.appendChild(document.createTextNode(t)),a},l=document.createElement("li"),t.forEach(function(e){var t=s.filter(function(t){return t.acyear===e}),a=t.filter(function(t){return-1===t.date.indexOf("-01")&&-1===t.date.indexOf("-09")}).map(function(t){return t.data}).join(" "),r=document.createElement("fieldset"),n=document.createElement("legend");n.classList.add("u-my-1","text-xsm"),r.appendChild(n),r.setAttribute("class","c-search-filters-subgroup"),n.innerText="Academic year ".concat(e),l.appendChild(r),t.filter(function(t){return t.acyear===e&&(-1<t.date.indexOf("-01")||-1<t.date.indexOf("-09"))}).map(function(t){r.appendChild(new o("".concat(t.month," ").concat(t.year),t.data))}),a.length&&r.appendChild(new o("Other ".concat(e),"".concat(a)))}),c.appendChild(l))}(),(stir=stir||{}).searchUI=stir.searchUI||{},stir.searchUI.asideAccordion=function(t,e){console.log("hello");var a,r=t.querySelector("p.c-search-filters-header"),n=t.querySelector("div");r&&n&&(t.setAttribute("data-behaviour","accordion"),(a=document.createElement("button")).innerHTML=r.innerHTML,a.setAttribute("id","filteraccordbtn_"+e),a.setAttribute("aria-controls","filteraccordpanel_"+e),a.setAttribute("aria-expanded","false"),r.innerHTML="",r.appendChild(a),n.setAttribute("id","filteraccordpanel_"+e),n.setAttribute("aria-labelledby","filteraccordbtn_"+e),n.setAttribute("role","region"),n.classList.add("hide"),a.addEventListener("click",function(t){n.classList.toggle("hide"),n.classList.contains("hide")?a.setAttribute("aria-expanded","false"):a.setAttribute("aria-expanded","true")}))},stir.searchUI.verticalSlider=function(t,e){function a(t,e,a){var r=s(),t=c(t,e,a);return r.insertAdjacentElement("beforeend",t),t.addEventListener("click",function(t){t.preventDefault(),i.goTo(e)}),r}var r,n,s=function(){var t=document.createElement("div");return t.classList.add("tns-controls"),t.setAttribute("aria-label","Carousel Navigation"),t.setAttribute("tabindex","0"),t},c=function(t,e,a){var r=document.createElement("button");return r.innerHTML='<span class="uos-'+a+' icon--medium "></span>',r.setAttribute("data-controls",e),r.setAttribute("aria-label",e),r.setAttribute("type","button"),r.setAttribute("tabindex","-1"),r.setAttribute("aria-controls",t),r},i=tns({container:t,controls:!1,loop:!1,slideBy:7,items:7,axis:"vertical",autoHeight:!1,touch:!0,swipeAngle:30,speed:400});i&&(t=i.getInfo().container)&&(r=a(t.id,"prev","chevron-up"),n=a(t.id,"next","chevron-down"),t.parentElement.parentElement.insertAdjacentElement("afterend",n),t.parentElement.parentElement.insertAdjacentElement("beforebegin",r),e.parentElement.setAttribute("data-inittns",""))},stir.searchUI.sliderArias=function(a){a&&setTimeout(function(){var t=a.querySelector('[data-controls="prev"]'),e=a.querySelector('[data-controls="next"]');return t&&t.setAttribute("aria-label","Previous"),e&&e.setAttribute("aria-label","Next"),!0},100)},stir.searchUI.slideTab=function(r){var n,e,s,t,a,c;r&&(n={slideBox:r,slideNavBox:r.querySelector("[data-searchbtnstns]"),slideNavBtns:Array.prototype.slice.call(r.querySelectorAll("[data-searchbtnstns] h2 button")),slideResultTabs:Array.prototype.slice.call(r.querySelectorAll("#mySlider1 > div")),accordions:Array.prototype.slice.call(r.querySelectorAll("[data-behaviour=accordion]"))}).slideNavBox&&n.slideNavBtns&&n.slideResultTabs&&(e=function(t){var e=tns({container:"#"+t.slideNavBox.id,items:s(stir.MediaQuery.current),loop:!1,slideBy:"page",controls:!0,controlsText:['<span class="uos-chevron-left icon--medium "></span>','<span class="uos-chevron-right icon--medium "></span>'],touch:!0,swipeAngle:30,navPosition:"top",autoHeight:!0,autoplay:!1}),a=(t.slideNavBox.setAttribute("role","tablist"),stir.searchUI.sliderArias(t.slideBox),t.slideNavBtns.forEach(function(t){t.closest("h2").style.width="90px",t.closest("div.tns-item").setAttribute("role","tab"),t.setAttribute("tabindex","-1"),t.setAttribute("type","button"),t.setAttribute("aria-controls","search_results_panel_"+t.getAttribute("data-open")),t.setAttribute("id","searchtab_"+t.getAttribute("data-open"))}),t.slideResultTabs.forEach(function(t){t.setAttribute("role","tabpanel"),t.setAttribute("tabindex","0"),t.setAttribute("id","search_results_panel_"+t.getAttribute("data-panel")),t.setAttribute("aria-labelledby","searchtab_"+t.getAttribute("data-panel"))}),QueryParams.get("tab")?QueryParams.get("tab"):"all"),a=r.querySelector("button[data-open="+a+"]");t.slideNavBox&&t.slideNavBox.classList.contains("hide-no-js")&&t.slideNavBox.classList.remove("hide-no-js"),a&&(a.click(),t.slideNavBtns.indexOf(a)>=s(stir.MediaQuery.current))&&e.goTo(t.slideNavBtns.indexOf(a))},s=function(t){return"small"===t?3:"medium"===t?4:n.slideNavBtns.length},document.addEventListener("scroll",(t=function(){var t=n.slideBox.getBoundingClientRect().top;t<.01&&n.slideBox.classList.add("stuck"),0<t&&n.slideBox.classList.remove("stuck")},c=!(a=200),function(){c||(t.call(),c=!0,setTimeout(function(){c=!1},a))})),n.slideNavBox.addEventListener("click",function(t){var e,a,r=t.target.closest("button[data-open]");r&&(e=r.getAttribute("data-open")||"null",a=stir.node('[data-panel="'+e+'"]'),n.slideNavBtns.forEach(function(t){t.parentElement.classList.remove("slide-tab--active")}),r.closest("h2").classList.add("slide-tab--active"),n.slideResultTabs.forEach(function(t){t.classList.add("hide"),t.setAttribute("aria-hidden","true"),t.getAttribute("data-panel")===e&&(t.classList.remove("hide"),t.removeAttribute("aria-hidden"))}),a.classList.remove("hide"),a.removeAttribute("aria-hidden"),stir.scrollToElement&&stir.scrollToElement(n.slideBox,0),t.isTrusted)&&QueryParams.set("tab",e)}),window.addEventListener("popstate",function(t){return e(n)}),e(n))},function(){var e,t;void 0!==window.URLSearchParams&&(e=function(t){var e;""===t.target.parentElement.dataset.containtns&&""!==t.target.parentElement.dataset.inittns&&(e=t.target.parentElement.nextElementSibling.children[0])&&stir.searchUI.verticalSlider(e,t.target)},stir.nodes('[data-containtns=""]').forEach(function(t){t.children[0].addEventListener("click",e)}),(t=stir.nodes(".c-search-results-area")).length&&t.forEach(function(t){return stir.searchUI.slideTab(t)}),t=stir.nodes(".c-search-results-filters"),"small"===stir.MediaQuery.current||"medium"===stir.MediaQuery.current)&&t.length&&t.forEach(function(t,e){return stir.searchUI.asideAccordion(t,e)})}(),(stir=stir||{}).funnelback=function(){function r(){return new URL("scale",e)}var t="dev"===UoS_env.name||"qa"===UoS_env.name||"preview"===UoS_env.name?"stage-shared-15-24-search.clients.uk.funnelback.com":"search.stir.ac.uk",e="https://".concat(t,"/s/");return{getHostname:function(){return t},getJsonEndpoint:function(){return new URL("search.json",e)},getScaleEndpoint:r,getCroppedImageElement:function(t){var e,a;return t.url?(e=r(),a=stir.Object.extend({},t,{type:"crop_center",format:"jpeg"}),e.search=new URLSearchParams(a),a={src:e,alt:t.alt,width:Math.floor(t.width/2),height:Math.floor(t.height/2),original:t.url},'<img src="'.concat(a.src,'" alt="').concat(a.alt,'" height="').concat(a.height,'" width="').concat(a.width,'" loading=lazy data-original=').concat(a.original,">")):"\x3c!-- no image --\x3e"},getTags:function(t){t=t&&t.split(";");return t&&t.map(stir.templates.search.tagGroup).join("")},imgError:function(t){var e;t.target.getAttribute("data-original")&&t.target.getAttribute("src")!=t.target.getAttribute("data-original")?t.target.src=t.target.getAttribute("data-original"):(null!=(e=t.target.parentElement.parentElement)&&null!=(e=e.classList)&&e.remove("c-search-result__with-thumbnail"),t.target.parentElement.parentElement.removeChild(t.target.parentElement))}}}(),stir.courses=function(){var e="dev"===UoS_env.name||"qa"===UoS_env.name;return{clearing:!1,getCombos:function(){var t;if(!stir.courses.combos)return t={dev:"combo.json",qa:"combo.json",preview:(null==stir||null==(t=stir.t4Globals)||null==(t=t.search)?void 0:t.combos)||"",prod:"https://www.stir.ac.uk/media/stirling/feeds/combo.json"},e&&console.info("[Search] Getting combo data for ".concat(UoS_env.name," environment (").concat(t[UoS_env.name],")")),stir.getJSON(t[UoS_env.name],function(t){return stir.courses.combos=t&&!t.error?t.slice(0,-1):[]})},showCombosFor:function(t){if(!t||!stir.courses.combos)return[];for(var e=isNaN(t)&&new URL(t).pathname,a=[],r=0;r<stir.courses.combos.length;r++)for(var n=0;n<stir.courses.combos[r].courses.length;n++)if(e&&e===stir.courses.combos[r].courses[n].url||stir.courses.combos[r].courses[n].url.split("/").slice(-1)==t){var s=stir.clone(stir.courses.combos[r]);s.courses.splice(n,1),s.courses=s.courses.filter(function(t){return t.text}),a.push(s);break}return a}}}(),stir.search=function(){var l,n,r,s,c,i,o,a,u,m,d,p,f,g,h,v,y,b,w,_,x,t,e,D,A,S,k,E,L,U,T,j,q,O;void 0===window.URLSearchParams?(e=document.querySelector(".c-search-results-area"))&&e.parentElement.removeChild(e):(l="dev"===UoS_env.name||"qa"===UoS_env.name,e="small"===stir.MediaQuery.current?5:10,n=256,t=stir.courses.clearing,l&&console.info("[Search] initialising…"),O=stir.curry(function(t,e){return t.search=new URLSearchParams(e),t}),r=stir.curry(function(t,e){return stir.Object.extend({},t,e)}),s=function(t,e){var a,r=new URLSearchParams(e),n=_createForOfIteratorHelper(new URLSearchParams(t.search));try{for(n.s();!(a=n.n()).done;){var s=_slicedToArray(a.value,2),c=s[0],i=s[1];r.set(c,i)}}catch(t){n.e(t)}finally{n.f()}return t.search=r,t},c=function(){var t=document.createElement("button");return t.innerText="Load more results",t.setAttribute("class","button hollow tiny"),t},t={main:["c","d","access","award","biogrgaphy","breadcrumbs","category","custom","delivery","faculty","group","h1","image","imagealt","level","modes","online","pathways","role","register","sid","start","startDate","subject","tags","type","ucas","venue","profileCountry","profileCourse1","profileImage"],courses:["c","award","code","delivery","faculty","image","level","modes","pathways","sid","start","subject","ucas"],clearing:t?["clearingEU","clearingInternational","clearingRUK","clearingScotland","clearingSIMD"]:[]},(i={url:stir.funnelback.getJsonEndpoint(),form:document.querySelector("form.x-search-redevelopment"),input:document.querySelector('form.x-search-redevelopment input[name="query"]'),parameters:{any:{collection:"stir-main",SF:"[".concat(t.main.concat(t.clearing).join(","),"]"),num_ranks:e,query:"",spelling:!0,explain:!0,sortall:!0,sort:"score_ignoring_tiers","cool.21":.9},news:{collection:"stir-www",meta_type:"News",meta_v_not:"faculty-news",sort:"date",fmo:"true",SF:"[c,d,h1,image,imagealt,tags]",num_ranks:e,SBL:450},event:{collection:"stir-events",fmo:!0,SF:"[c,d,image,imagealt,startDate,venue,online,tags,type,register]",query:"!padrenullquery",num_ranks:e},gallery:{collection:"stir-www",meta_type:"Gallery",sort:"date",fmo:"true",SF:"[c,d,image]",num_ranks:e},course:{collection:"stir-courses",SF:"[".concat(t.courses.concat(t.clearing).join(","),"]"),fmo:"true",num_ranks:e,explain:!0,query:"!padrenullquery",timestamp:+new Date},coursemini:{collection:"stir-courses",SF:"[c,award,code,delivery,faculty,image,level,modes,sid,start,subject,teaser,ucas]",num_ranks:3,curator:"off",query:"!padrenullquery"},person:{collection:"stir-research",meta_type:"profile",fmo:"true",SF:"[c,d,biogrgaphy,category,faculty,groups,image,imagealt,programme,role,themes]",SM:"meta",MBL:350,num_ranks:e},research:{collection:"stir-research",SM:"meta",SF:"[c,d,category,groups,output,programme,themes,type]",MBL:450,num_ranks:e}},noquery:{course:{sort:"title"}}}).form&&i.form.query&&(l&&console.info("[Search] initialised."),o=function(t){return i.form.query.value||QueryParams.get("query")||i.parameters[t].query||"University of Stirling"},a=function(){return i.form.query.value?QueryParams.set("query",i.form.query.value):QueryParams.remove("query")},u=function(t){return t.getAttribute("data-type")||t.parentElement.getAttribute("data-type")},m=function(t){return QueryParams.set(t,parseInt(QueryParams.get(t)||1)+1)},d=function(t){return e=parseInt(QueryParams.get(t)||1),t=i.parameters[t].num_ranks||20,(e-1)*t+1;var e},p=function(){return Object.keys(i.parameters).forEach(function(t){return QueryParams.remove(t)})},f=function(t){var e,t=document.querySelector(".c-search-results-area form[data-filters="+t+"]"),a=t?new FormData(t):new FormData,r=_createForOfIteratorHelper(a.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;1<a.getAll(n).length&&a.set(n,"["+a.getAll(n).join(" ")+"]")}}catch(t){r.e(t)}finally{r.f()}return a},g=stir.curry(function(t,e){return t.insertAdjacentHTML("beforeend",e)}),h=stir.curry(function(t,e){return t.innerHTML=e}),v=stir.curry(function(t,e){return t&&(0<e.response.resultPacket.resultsSummary.totalMatching&&t.removeAttribute("disabled"),e.response.resultPacket.resultsSummary.currEnd===e.response.resultPacket.resultsSummary.totalMatching)&&t.setAttribute("disabled",!0),e}),y=stir.curry(function(t,e){Array.prototype.forEach.call(t.querySelectorAll('[data-behaviour="accordion"]'),function(t){return new stir.accord(t,!1)}),Array.prototype.forEach.call(t.querySelectorAll("img"),function(t){t.addEventListener("error",stir.funnelback.imgError)})}),b=stir.curry(function(t,e){t.setAttribute("data-page",(r=e.response.resultPacket.resultsSummary.currStart,a=e.response.resultPacket.resultsSummary.numRanks,Math.floor(r/a+1)));var a,r=t.parentElement.parentElement.querySelector(".c-search-results-summary");return r&&(r.innerHTML=stir.templates.search.summary(e)),e}),w=stir.curry(function(t,e){return k.cura(e.response.curator.exhibits)+k[t](e.response.resultPacket.results)+stir.templates.search.pagination({currEnd:e.response.resultPacket.resultsSummary.currEnd,totalMatching:e.response.resultPacket.resultsSummary.totalMatching,progress:(a=e.response.resultPacket.resultsSummary.currEnd,e=e.response.resultPacket.resultsSummary.totalMatching,a/e*100)})+(E[t]?E[t]():"");var a}),_=function(t){var e;return!(!t||!t.hasAttribute("data-fallback")||(e=(e=document.getElementById(t.getAttribute("data-fallback")))&&(e.innerHTML||""),t.innerHTML=e,0))},x=O(i.url),t=stir.curry(function(t,e){var a=r(i.parameters[t])(stir.Object.extend({},{start_rank:d(t),query:o(t),curator:!(1<d(t))},(a=t,i.form.query.value?{}:i.noquery[a]))),a=s(x(a),f(t));l?stir.getJSONAuthenticated(a,e):stir.getJSON(a,e)}),e=stir.curry(function(t,e){var a=o(t).trim(),a=r(i.parameters[t])({start_rank:d(t),query:"[t:".concat(a," c:").concat(a," subject:").concat(a,"]")}),a=s(x(a),f(t));l?stir.getJSONAuthenticated(a,e):stir.getJSON(a,e)}),D=function(t){var e,a,r;t.innerHTML="",t.hasAttribute("data-infinite")?(e=document.createElement("div"),a=document.createElement("div"),(r=new c).setAttribute("disabled",!0),r.addEventListener("click",function(t){return T(e,r)}),t.appendChild(e),t.appendChild(a),a.appendChild(r),a.setAttribute("class","c-search-results__loadmore flex-container align-center u-mb-2"),U(e,r)):U(t)},A=Array.prototype.slice.call(document.querySelectorAll(".c-search-results[data-type],[data-type=coursemini]")),S={any:t("any"),news:t("news"),event:t("event"),gallery:t("gallery"),course:t("course"),coursemini:e("coursemini"),person:t("person"),research:t("research")},k={any:function(t){return t.map(stir.templates.search.auto).join("")},news:function(t){return t.map(stir.templates.search.news).join("")},event:function(t){return t.map(stir.templates.search.event).join("")},gallery:function(t){return t.map(stir.templates.search.gallery).join("")},course:function(t){return t.map(stir.templates.search.course).join("")},coursemini:function(t){return t.map(stir.templates.search.coursemini).join("")},person:function(t){return t.map(stir.templates.search.person).join("")},research:function(t){return t.map(stir.templates.search.research).join("")},cura:function(t){return t.map(stir.templates.search.cura).join("")}},E={coursemini:function(){return'<p class="text-center"><a href="?tab=courses&query='.concat(o("any"),'">View all course results</a></p>')}},L={course:function(t){var e=stir.courses.getCombos();e?e.addEventListener("loadend",t):t.call()}},U=function(e,t){var a=u(e);if(S[a]){function r(t){return e&&e.parentElement?!t||t.error||!t.response||!t.response.resultPacket||0===t.response.resultPacket.resultsSummary.totalMatching&&_(e)?void 0:o(t):l&&console.error("[Search] late callback, element no longer on DOM")}var n=b(e),t=v(t),s=h(e),c=w(a),i=y(e),o=stir.compose(i,s,c,t,n);if(p(),L[a])return L[a](function(t){return S[a](r)});S[a](r)}},T=function(t,e){var a,r,n,s,c=u(t);S[c]&&(a=b(t),r=g(t),n=w(c),t=y(t),s=stir.compose(t,r,n,v(e),a),m(c),S[c](function(t){return t&&!t.error?s(t):new Function}))},j=function(){return A.forEach(D)},Array.prototype.forEach.call(document.querySelectorAll(".c-search-results-area form[data-filters]"),function(e){var t=e.getAttribute("data-filters"),a=document.querySelector('.c-search-results[data-type="'.concat(t,'"]'));e.addEventListener("reset",function(t){Array.prototype.forEach.call(e.querySelectorAll("input"),function(t){return t.checked=!1}),D(a)}),e.addEventListener("change",function(t){u(a),D(a)}),e.addEventListener("submit",function(t){D(a),t.preventDefault()})}),Array.prototype.forEach.call(document.querySelectorAll(".c-search-results-summary"),function(t){t.addEventListener("click",function(t){var e;t.target.hasAttribute("data-suggest")?(t.preventDefault(),i.input.value=t.target.innerText,a(),j()):t.target.hasAttribute("data-value")&&(e='input[name="'.concat(t.target.getAttribute("data-name"),'"][value="').concat(t.target.getAttribute("data-value"),'"]'),(e=document.querySelector(e))?(e.checked=!e.checked,t.target.parentElement.removeChild(t.target),j()):(e='select[name="'.concat(t.target.getAttribute("data-name"),'"]'),(e=document.querySelector(e))&&(e.selectedIndex=0,t.target.parentElement.removeChild(t.target),j())))})}),q=function(t){a(),j(),t.preventDefault()},(O=function(t){void 0!==QueryParams.get("query")&&(i.form.query.value=QueryParams.get("query").substring(0,n));var e,a=QueryParams.getAll();for(e in a){var r=document.querySelector('input[name="'.concat(encodeURIComponent(e),'"][value="').concat(encodeURIComponent(a[e]),'"]'));r&&(r.checked=!0)}i.form.addEventListener("submit",q),j()})(),window.addEventListener("popstate",O)))},stir.search();